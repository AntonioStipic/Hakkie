{"version":3,"file":"jaspero-form-builder.js","sources":["../../../../projects/form-builder/src/lib/enums/segment-type.enum.ts","../../../../projects/form-builder/src/lib/enums/state.enum.ts","../../../../projects/form-builder/src/lib/form-builder.service.ts","../../../../projects/form-builder/src/lib/utils/custom-fields.ts","../../../../projects/form-builder/src/lib/utils/create-segment-injector.ts","../../../../projects/form-builder/src/lib/segment/segment.component.ts","../../../../projects/form-builder/src/lib/segments/accordion/accordion.component.ts","../../../../projects/form-builder/src/lib/segments/card/card.component.ts","../../../../projects/form-builder/src/lib/segments/empty/empty.component.ts","../../../../projects/form-builder/src/lib/segments/stepper/stepper.component.ts","../../../../projects/form-builder/src/lib/utils/safe-eval.ts","../../../../projects/form-builder/src/lib/segments/tabs/tabs.component.ts","../../../../projects/form-builder/src/lib/consts/segment-type-component-map.const.ts","../../../../projects/form-builder/src/lib/interfaces/condition.interface.ts","../../../../projects/form-builder/src/lib/utils/compile-segment.ts","../../../../projects/form-builder/src/lib/utils/filter-and-compile-segments.ts","../../../../projects/form-builder/src/lib/enums/component-type.enum.ts","../../../../projects/form-builder/src/lib/services/db.service.ts","../../../../projects/form-builder/src/lib/utils/create-component-injector.ts","../../../../projects/form-builder/src/lib/field/field.component.ts","../../../../projects/form-builder/src/lib/utils/get-hsd.ts","../../../../projects/form-builder/src/lib/fields/autocomplete/autocomplete.component.ts","../../../../projects/form-builder/src/lib/fields/checkbox/checkbox.component.ts","../../../../projects/form-builder/src/lib/fields/chips/chips.component.ts","../../../../projects/form-builder/src/lib/utils/clone-abstract-control.ts","../../../../projects/form-builder/src/lib/fields/date-field/date-field.component.ts","../../../../projects/form-builder/src/lib/fields/draggable-list/draggable-list.component.ts","../../../../projects/form-builder/src/lib/services/storage.service.ts","../../../../projects/form-builder/src/lib/utils/format-file-name.ts","../../../../projects/form-builder/src/lib/utils/parse-size.ts","../../../../projects/form-builder/src/lib/fields/file/file.component.ts","../../../../projects/form-builder/src/lib/utils/format-generated-images.ts","../../../../projects/form-builder/src/lib/utils/storage-url.ts","../../../../projects/form-builder/src/lib/utils/switch-item-locations.ts","../../../../projects/form-builder/src/lib/fields/gallery/read-file.ts","../../../../projects/form-builder/src/lib/fields/gallery/gallery.component.ts","../../../../projects/form-builder/src/lib/fields/image/image.component.ts","../../../../projects/form-builder/src/lib/fields/input/input.component.ts","../../../../projects/form-builder/src/lib/fields/radio/radio.component.ts","../../../../projects/form-builder/src/lib/fields/range/range.component.ts","../../../../projects/form-builder/src/lib/utils/additional-context.ts","../../../../projects/form-builder/src/lib/utils/parse-template.ts","../../../../projects/form-builder/src/lib/utils/role.ts","../../../../projects/form-builder/src/lib/fields/select/select.component.ts","../../../../projects/form-builder/src/lib/fields/slider/slider.component.ts","../../../../projects/form-builder/src/lib/fields/textarea/textarea.component.ts","../../../../projects/form-builder/src/lib/fields/toggle/toggle.component.ts","../../../../projects/form-builder/src/lib/fields/wysiwyg/wysiwyg.component.ts","../../../../projects/form-builder/src/lib/consts/component-type-component-map.const.ts","../../../../projects/form-builder/src/lib/enums/schema-type.enum.ts","../../../../projects/form-builder/src/lib/validators/schema-validators.class.ts","../../../../projects/form-builder/src/lib/utils/schema-to-component.ts","../../../../projects/form-builder/src/lib/utils/parser.ts","../../../../projects/form-builder/src/lib/form-builder.component.ts","../../../../projects/form-builder/src/lib/directives/dropzone/dropzone.directive.ts","../../../../projects/form-builder/src/lib/pipes/show-field/show-field.pipe.ts","../../../../projects/form-builder/src/lib/form-builder.module.ts","../../../../projects/form-builder/src/public-api.ts","../../../../projects/form-builder/src/jaspero-form-builder.ts"],"sourcesContent":["export enum SegmentType {\n  Empty = 'empty',\n  Card = 'card',\n  Accordion = 'accordion',\n  Tabs = 'tabs',\n  Stepper = 'stepper'\n}\n","export enum State {\n  Create = 'create',\n  Edit = 'edit'\n}\n","import {Injectable} from '@angular/core';\nimport {MatSnackBar} from '@angular/material/snack-bar';\nimport {TranslocoService} from '@ngneat/transloco';\nimport {Observable, throwError} from 'rxjs';\nimport {catchError, tap} from 'rxjs/operators';\n\n@Injectable()\nexport class FormBuilderService {\n  constructor(\n    private transloco: TranslocoService,\n    private snackBar: MatSnackBar\n  ) {\n  }\n\n  /**\n   * Array of components that need to\n   * run save() methods on single instance\n   */\n  saveComponents: any[] = [];\n\n  notify(\n    options: {\n      success?: string | null;\n      error?: string;\n    } = {}\n  ): <T>(source$: Observable<T>) => Observable<T> {\n    const finalOptions = {\n      success: 'GENERAL.OPERATION_COMPLETED',\n      error: 'GENERAL.OPERATION_FAILED',\n      ...options\n    };\n\n    return <T>(source$: Observable<T>) => {\n      return source$.pipe(\n        tap(() => {\n          if (finalOptions.success) {\n            this.snackBar.open(\n              this.transloco.translate(finalOptions.success),\n              this.transloco.translate('GENERAL.DISMISS'),\n              {\n                duration: 5000\n              }\n            );\n          }\n        }),\n        catchError(err => {\n          if (finalOptions.error) {\n            this.snackBar.open(\n              this.transloco.translate(finalOptions.error),\n              this.transloco.translate('GENERAL.DISMISS'),\n              {\n                panelClass: 'snack-bar-error',\n                duration: 5000\n              }\n            );\n          }\n\n          console.error(err);\n          return throwError(err);\n        })\n      );\n    };\n  }\n}\n","import {Component, InjectionToken} from '@angular/core';\n\nexport interface CustomFields {\n  [key: string]: Component;\n}\n\nexport const CUSTOM_FIELDS = new InjectionToken<{}>('CUSTOM_FIELDS');\n","import {PortalInjector} from '@angular/cdk/portal';\nimport {InjectionToken} from '@angular/core';\n\nexport const SEGMENT_DATA = new InjectionToken<{}>('SEGMENT_DATA');\n\nexport function createSegmentInjector(injector, dataToPass): PortalInjector {\n  const injectorTokens = new WeakMap();\n  injectorTokens.set(SEGMENT_DATA, dataToPass);\n  return new PortalInjector(injector, injectorTokens);\n}\n","import {moveItemInArray} from '@angular/cdk/drag-drop';\nimport {Component, HostBinding, Inject, Injector, OnInit} from '@angular/core';\nimport {FormControl} from '@angular/forms';\nimport {get} from 'json-pointer';\nimport {CompiledField} from '../interfaces/compiled-field.interface';\nimport {CompiledSegment} from '../interfaces/compiled-segment.interface';\nimport {Definitions} from '../interfaces/definitions.interface';\nimport {SEGMENT_DATA} from '../utils/create-segment-injector';\nimport {filterAndCompileSegments} from '../utils/filter-and-compile-segments';\nimport {Parser, Pointers} from '../utils/parser';\n\nexport interface SegmentData {\n  segment: CompiledSegment;\n  parser: Parser;\n  definitions: Definitions;\n  parent?: string;\n}\n\n@Component({\n  selector: 'fb-segment',\n  template: ''\n})\nexport class SegmentComponent<T = any> implements OnInit {\n  constructor(\n    @Inject(SEGMENT_DATA) public sData: SegmentData,\n    public injector: Injector\n  ) {}\n\n  segment: CompiledSegment<T>;\n  pointers: Pointers;\n  nestedSegments: CompiledSegment<T>[];\n  nestedArraySegments: Array<CompiledSegment[]> = [];\n  arrayFields: Array<CompiledField[]> = [];\n\n  @HostBinding('class')\n  classes: string;\n\n  @HostBinding('id')\n  id: string;\n\n  ngOnInit() {\n    this.segment = this.sData.segment;\n    this.classes = this.sData.segment.classes.join(' ');\n    this.pointers = this.sData.parser.pointers;\n    this.id = this.sData.segment.id || '';\n\n    /**\n     * Each segment compiles all nested segments\n     */\n    this.nestedSegments = filterAndCompileSegments(\n      this.sData.segment.nestedSegments || [],\n      this.sData.parser,\n      this.sData.definitions,\n      this.injector,\n      this.segment.entryValue\n    );\n\n    const array = this.segment.array as string;\n\n    /**\n     * Add array items if necessary\n     */\n    if (array && this.segment.entryValue) {\n      let values;\n\n      try {\n        values = get(this.segment.entryValue, array);\n      } catch (e) {}\n\n      if (values) {\n        values.forEach(() => this.addArrayItem(false));\n\n        (this.pointers[array].control as FormControl).patchValue(\n          values\n        );\n\n        for (let i = 0; i < values.length; i++) {\n          // @ts-ignore\n          this.sData.parser.loadHooks(this.pointers[array].arrayPointers[i]);\n        }\n      }\n    }\n  }\n\n  addArrayItem(loadHook = true) {\n    const array = this.segment.array as string;\n    const pointers: any = this.sData.parser.addArrayItem(\n      (this.sData.parent || '') + array,\n      loadHook,\n      this.sData.parent ? {\n        pointer: this.sData.parent,\n        index: 0\n      } : undefined\n    );\n\n    let fields: CompiledField[];\n\n    if (this.segment.fields && this.segment.fields.length) {\n      fields = (this.segment.fields as string[]).map(key => {\n\n        key = (this.sData.parent || '') + key;\n\n        return this.sData.parser.field(\n          key,\n          pointers[key],\n          this.sData.definitions,\n          true,\n          array\n        );\n      });\n    } else {\n      fields = [this.sData.parser.field(\n        array,\n        {\n          ...this.pointers[array],\n          control: pointers\n        },\n        this.sData.definitions\n      )];\n    }\n\n    this.arrayFields.unshift(\n      fields\n    );\n\n    this.nestedArraySegments.unshift(\n      this.nestedSegments = filterAndCompileSegments(\n        this.sData.segment.nestedSegments || [],\n        this.sData.parser,\n        this.sData.definitions,\n        this.injector,\n        this.segment.entryValue,\n        this.segment.array\n      )\n    );\n  }\n\n  moveArray(up: boolean, fromIndex: number) {\n    let toIndex: number;\n\n    if (up) {\n      toIndex = fromIndex === 0 ? this.arrayFields.length - 1 : fromIndex - 1;\n    } else {\n      toIndex = fromIndex === (this.arrayFields.length - 1) ? 0 : fromIndex + 1;\n    }\n\n    moveItemInArray(\n      this.arrayFields,\n      fromIndex,\n      toIndex\n    );\n\n    moveItemInArray(\n      this.nestedArraySegments,\n      fromIndex,\n      toIndex\n    );\n\n    this.sData.parser.moveArrayItem(\n      (this.sData.parent || '') + this.segment.array as string,\n      fromIndex,\n      toIndex,\n      this.sData.parent ? {\n        pointer: this.sData.parent,\n        index: 0\n      } : undefined\n    );\n  }\n\n  removeArrayItem(index: number) {\n    this.sData.parser.removeArrayItem(\n      (this.sData.parent || '') + this.segment.array as string,\n      index,\n      this.sData.parent ? {\n        pointer: this.sData.parent,\n        index: 0\n      } : undefined\n    );\n    this.nestedArraySegments.splice(index, 1);\n    this.arrayFields.splice(index, 1);\n  }\n}\n","import {ChangeDetectionStrategy, Component, OnInit} from '@angular/core';\nimport {CompiledField} from '../../interfaces/compiled-field.interface';\nimport {CompiledSegment} from '../../interfaces/compiled-segment.interface';\nimport {Segment} from '../../interfaces/segment.interface';\nimport {SegmentComponent} from '../../segment/segment.component';\nimport {filterAndCompileSegments} from '../../utils/filter-and-compile-segments';\n\ninterface SegmentAccord {\n  title?: string;\n  description?: string;\n  fields?: string[];\n  nestedSegments?: Segment[];\n  expanded?: boolean;\n}\n\ninterface CompiledSegmentAccord {\n  title?: string;\n  description?: string;\n  fields?: CompiledField[];\n  nestedSegments?: CompiledSegment[];\n  expanded?: boolean;\n}\n\n@Component({\n  selector: 'fb-accordion',\n  templateUrl: './accordion.component.html',\n  styleUrls: ['./accordion.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AccordionComponent extends SegmentComponent implements OnInit {\n\n  accordions: CompiledSegmentAccord[];\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.accordions = (this.sData.segment.configuration || []).map(\n      (accord: SegmentAccord) => ({\n        title: accord.title,\n        fields: (accord.fields || []).map(key =>\n          this.sData.parser.field(\n            key,\n            this.pointers[key],\n            this.sData.definitions\n          )\n        ),\n        nestedSegments: filterAndCompileSegments(\n          accord.nestedSegments || [],\n          this.sData.parser,\n          this.sData.definitions,\n          this.injector,\n          this.segment.entryValue\n        )\n      })\n    );\n  }\n}\n","import {ChangeDetectionStrategy, Component} from '@angular/core';\nimport {CompiledField} from '../../interfaces/compiled-field.interface';\nimport {SegmentComponent} from '../../segment/segment.component';\n\n@Component({\n  selector: 'fb-card',\n  templateUrl: './card.component.html',\n  styleUrls: ['./card.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CardComponent extends SegmentComponent {\n  get fields() {\n    return this.segment.fields as CompiledField[];\n  }\n}\n","import {ChangeDetectionStrategy, Component} from '@angular/core';\nimport {CompiledField} from '../../interfaces/compiled-field.interface';\nimport {SegmentComponent} from '../../segment/segment.component';\n\n@Component({\n  selector: 'fb-empty',\n  templateUrl: './empty.component.html',\n  styleUrls: ['./empty.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class EmptyComponent extends SegmentComponent {\n  get fields() {\n    return this.segment.fields as CompiledField[];\n  }\n}\n","import {ChangeDetectionStrategy, Component} from '@angular/core';\nimport {SegmentComponent} from '../../segment/segment.component';\n\n@Component({\n  selector: 'fb-stepper',\n  templateUrl: './stepper.component.html',\n  styleUrls: ['./stepper.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StepperComponent extends SegmentComponent {}\n","export function safeEval(method: string) {\n  let final: any;\n\n  try {\n    // tslint:disable-next-line:no-eval\n    final = eval(method);\n  } catch (e) {}\n\n  return final;\n}\n","import {ChangeDetectionStrategy, Component, OnInit} from '@angular/core';\nimport {MatTabChangeEvent} from '@angular/material/tabs';\nimport {CompiledField} from '../../interfaces/compiled-field.interface';\nimport {CompiledSegment} from '../../interfaces/compiled-segment.interface';\nimport {Segment} from '../../interfaces/segment.interface';\nimport {SegmentComponent, SegmentData} from '../../segment/segment.component';\nimport {filterAndCompileSegments} from '../../utils/filter-and-compile-segments';\nimport {safeEval} from '../../utils/safe-eval';\n\ntype SelectedTabChange = (event: MatTabChangeEvent, sData: SegmentData) => void;\n\ninterface TabsConfiguration {\n  selectedIndex?: number;\n  dynamicHeight?: boolean;\n  disableRipple?: boolean;\n  selectedTabChange?: string | SelectedTabChange;\n  alignment?: 'start' | 'center' | 'end';\n  tabs: SegmentTab[];\n}\n\ninterface SegmentTabShared {\n  title?: string;\n  disabled?: boolean;\n}\n\ninterface SegmentTab extends SegmentTabShared {\n  fields?: string[];\n  nestedSegments?: Segment[];\n}\n\ninterface CompiledSegmentTab extends SegmentTabShared {\n  fields?: CompiledField[];\n  nestedSegments?: CompiledSegment[];\n}\n\n@Component({\n  selector: 'fb-tabs',\n  templateUrl: './tabs.component.html',\n  styleUrls: ['./tabs.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TabsComponent extends SegmentComponent<TabsConfiguration> implements OnInit {\n\n  tabs: CompiledSegmentTab[];\n  selectedTabChange?: SelectedTabChange;\n\n  get configuration() {\n    return this.segment.configuration as TabsConfiguration;\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    if (this.configuration.selectedTabChange) {\n      this.selectedTabChange = safeEval(\n        this.configuration.selectedTabChange as string\n      );\n    }\n\n    this.tabs = this.configuration.tabs.map(\n      tab => ({\n        ...tab,\n        fields: (tab.fields || []).map(key =>\n          this.sData.parser.field(\n            key,\n            this.pointers[key],\n            this.sData.definitions\n          )\n        ),\n        nestedSegments: filterAndCompileSegments(\n          tab.nestedSegments || [],\n          this.sData.parser,\n          this.sData.definitions,\n          this.injector,\n          this.segment.entryValue\n        )\n      })\n    );\n  }\n\n  tabChange(event: MatTabChangeEvent) {\n    if (this.selectedTabChange) {\n      this.selectedTabChange(\n        event,\n        this.sData\n      );\n    }\n  }\n}\n\n","import {SegmentType} from '../enums/segment-type.enum';\nimport {AccordionComponent} from '../segments/accordion/accordion.component';\nimport {CardComponent} from '../segments/card/card.component';\nimport {EmptyComponent} from '../segments/empty/empty.component';\nimport {StepperComponent} from '../segments/stepper/stepper.component';\nimport {TabsComponent} from '../segments/tabs/tabs.component';\n\nexport const SEGMENT_TYPE_COMPONENT_MAP: {[key: string]: any} = {\n  [SegmentType.Empty]: EmptyComponent,\n  [SegmentType.Card]: CardComponent,\n  [SegmentType.Accordion]: AccordionComponent,\n  [SegmentType.Tabs]: TabsComponent,\n  [SegmentType.Stepper]: StepperComponent\n};\n","\n\nexport enum ConditionType {\n  Function = 'function',\n  Statement = 'statement'\n}\n\nexport enum ConditionAction {\n  Show = 'show',\n  Hide = 'hide'\n}\n\nexport enum ConditionEvaluate {\n  OnLoad = 'onLoad',\n  OnChange = 'onChange'\n}\n\nexport interface Condition {\n\n  /**\n   * Defaults to function\n   */\n  type?: ConditionType;\n\n  /**\n   * Stringified condition that could\n   * later also be an object representing\n   * a more complex statement\n   */\n  condition?: string;\n\n  /**\n   * Defaults to show\n   */\n  action?: ConditionAction;\n\n  /**\n   * Not always required; depends on\n   * condition type\n   */\n  data?: any;\n\n  /**\n   * Empty or undefined means evaluate always\n   */\n  evaluateStates?: number[];\n\n  /**\n   * Defaults to OnLoad\n   */\n  evaluateOn?: ConditionEvaluate;\n}\n\nexport interface CompiledCondition {\n  type: ConditionType;\n  action: ConditionAction;\n  condition: (data?: any) => any;\n  evaluateStates: number[];\n  evaluateOn: ConditionEvaluate;\n  data?: any;\n}\n","import {ComponentPortal} from '@angular/cdk/portal';\nimport {Injector} from '@angular/core';\nimport {SEGMENT_TYPE_COMPONENT_MAP} from '../consts/segment-type-component-map.const';\nimport {SegmentType} from '../enums/segment-type.enum';\nimport {CompiledField} from '../interfaces/compiled-field.interface';\nimport {CompiledSegment} from '../interfaces/compiled-segment.interface';\nimport {CompiledCondition, ConditionAction, ConditionEvaluate, ConditionType} from '../interfaces/condition.interface';\nimport {Definitions} from '../interfaces/definitions.interface';\nimport {Segment} from '../interfaces/segment.interface';\nimport {SegmentComponent} from '../segment/segment.component';\nimport {createSegmentInjector} from './create-segment-injector';\nimport {Parser} from './parser';\nimport {safeEval} from './safe-eval';\n\nexport function compileSegment(\n  segment: Segment,\n  parser: Parser,\n  definitions: Definitions,\n  injector: Injector,\n  entryValue: any,\n  parent = ''\n) {\n  const classes: string[] = [];\n\n  let fields: CompiledField[] | string[] = [];\n\n  if (segment.columnsDesktop) {\n    classes.push(`col-${segment.columnsDesktop}`);\n  }\n\n  if (segment.columnsTablet) {\n    classes.push(`col-m-${segment.columnsTablet}`);\n  }\n\n  if (segment.columnsMobile) {\n    classes.push(`col-s-${segment.columnsMobile}`);\n  }\n\n  /**\n   * If there aren't any column definitions\n   * default to full width\n   */\n  if (!classes.length) {\n    classes.push('col-12');\n  }\n\n  if (segment.classes) {\n    classes.push(...segment.classes);\n  }\n\n  if (segment.fields) {\n\n    /**\n     * If it's an array fields aren' parsed\n     */\n    if (segment.array) {\n      // @ts-ignore\n      fields = (segment.fields || []).map(fi => segment.array + fi);\n    } else {\n      fields = (segment.fields || [])\n        // @ts-ignore\n        .reduce((acc: CompiledField[], key: string) => {\n          const definition = parser.getFromDefinitions(key, definitions);\n\n          if (\n            !definition ||\n            !definition.roles ||\n            (\n              typeof definition.roles === 'string' ?\n                definition.roles === parser.role :\n                definition.roles.includes(parser.role)\n            )\n          ) {\n            acc.push(\n              parser.field(key, parser.pointers[key], definitions)\n            );\n          }\n\n          return acc;\n        }, []);\n    }\n  }\n\n  const compiledSegment = {\n    ...segment,\n    classes,\n    fields,\n    entryValue\n  } as CompiledSegment;\n\n  /**\n   * TODO:\n   * Statement support\n   */\n  if (segment.conditions) {\n\n    compiledSegment.conditions = [];\n    const valToPass = entryValue || {};\n\n    for (const cur of segment.conditions) {\n      let condition;\n\n      const type = cur.type || ConditionType.Function;\n      const action = cur.action || ConditionAction.Show;\n      const evaluateOn = cur.evaluateOn || ConditionEvaluate.OnLoad;\n      const evaluateStates = cur.evaluateStates || [0, 1, 2];\n\n      if (cur.condition) {\n        condition = safeEval(cur.condition as string);\n      }\n\n      if (condition) {\n\n        /**\n         * Evaluate on load conditions\n         */\n        if (evaluateOn === ConditionEvaluate.OnLoad) {\n\n          /**\n           * Check if items should be excluded right away\n           */\n          if (\n            (action === ConditionAction.Show && !condition(valToPass)) ||\n            (action === ConditionAction.Hide && condition(valToPass))\n          ) {\n            return null;\n          }\n        }\n\n        compiledSegment.conditions.push({\n          condition,\n          type,\n          action,\n          evaluateStates,\n          evaluateOn,\n          ...cur.data && {\n            data: cur.data\n          }\n        } as CompiledCondition);\n      }\n    }\n  }\n\n  return {\n    component: new ComponentPortal<SegmentComponent>(\n      SEGMENT_TYPE_COMPONENT_MAP[segment.type || SegmentType.Card],\n      null,\n      createSegmentInjector(injector, {\n        segment: compiledSegment,\n        parser,\n        definitions,\n        ...parent && {parent},\n      })\n    ),\n    ...compiledSegment\n  } as CompiledSegment;\n}\n","import {Injector} from '@angular/core';\nimport {Definitions} from '../interfaces/definitions.interface';\nimport {Segment} from '../interfaces/segment.interface';\nimport {compileSegment} from './compile-segment';\nimport {Parser} from './parser';\n\nexport function filterAndCompileSegments(\n  segments: Segment[],\n  parser: Parser,\n  definitions: Definitions,\n  injector: Injector,\n  value: any,\n  parent?: string\n) {\n  return segments.reduce((acc, cur) => {\n    if (!cur.authorization || cur.authorization.includes(parser.role)) {\n\n      const compiled = compileSegment(\n        cur,\n        parser,\n        definitions,\n        injector,\n        value,\n        parent\n      );\n\n      if (compiled) {\n        acc.push(\n          // @ts-ignore\n          compiled\n        );\n      }\n    }\n\n    return acc;\n  }, []);\n}\n","export enum ComponentType {\n  Input = 'input',\n  Select = 'select',\n  File = 'file',\n  Image = 'image',\n  Gallery = 'gallery',\n  Toggle = 'toggle',\n  Checkbox = 'checkbox',\n  Date = 'date',\n  Range = 'range',\n  Radio = 'radio',\n  Slider = 'slider',\n  Autocomplete = 'autocomplete',\n  Wysiwyg = 'wysiwyg',\n  Chips = 'chips',\n  Draggable = 'draggable',\n  Textarea = 'textarea'\n}\n","import {Observable, of} from 'rxjs';\nimport {WhereFilter} from '../interfaces/where-filter.interface';\n\nexport abstract class DbService {\n\n  getDocuments(\n    moduleId: string,\n    pageSize?: number,\n    sort?: {\n      active: string;\n      direction: string;\n    },\n    cursor?: any,\n    filters?: WhereFilter[]\n  ): Observable<any[]> {\n    return of([]);\n  }\n\n  getDocumentsSimple(\n    moduleId: string,\n    orderBy?: string,\n    filter?: WhereFilter\n  ): Observable<any[]> {\n    return of([]);\n  }\n\n  getStateChanges(\n    moduleId: string,\n    pageSize?: number,\n    sort?: {\n      active: string;\n      direction: string;\n    },\n    cursor?: any,\n    filters?: WhereFilter[],\n  ): Observable<any[]> {\n    return of([]);\n  }\n\n  getDocument<T = any>(\n    moduleId: string,\n    documentId: string,\n    stream = false\n  ): Observable<T> {\n    return of();\n  }\n\n  setDocument(\n    moduleId: string,\n    documentId: string,\n    data: any,\n    options?: any\n  ): Observable<void> {\n    return of();\n  }\n\n  removeDocument(moduleId: string, documentId: string): Observable<void> {\n    return of();\n  }\n\n  createUserAccount(email: string, password: string): Observable<{id: string}> {\n    return of();\n  }\n\n  removeUserAccount(id: string): Observable<any> {\n    return of();\n  }\n}\n","import {PortalInjector} from '@angular/cdk/portal';\nimport {InjectionToken, Injector} from '@angular/core';\n\nexport const COMPONENT_DATA = new InjectionToken<{}>('COMPONENT_DATA');\n\nexport function createComponentInjector(injector: Injector, dataToPass: any): PortalInjector {\n  const injectorTokens = new WeakMap();\n  injectorTokens.set(COMPONENT_DATA, dataToPass);\n  return new PortalInjector(injector, injectorTokens);\n}\n","import {Component, HostBinding, Inject} from '@angular/core';\nimport {FieldData} from '../interfaces/field-data.interface';\nimport {COMPONENT_DATA} from '../utils/create-component-injector';\n\n// @dynamic\n@Component({\n  selector: 'fb-field',\n  template: ''\n})\nexport class FieldComponent<T extends FieldData> {\n  constructor(\n    @Inject(COMPONENT_DATA) public cData: T\n  ) {\n\n    const classes = [\n      `fb-field-${this.cData.columnsDesktop || 12}`\n    ];\n\n    if (this.cData.columnsTablet) {\n      classes.push(`m-fb-field-${this.cData.columnsTablet}`);\n    }\n\n    if (this.cData.columnsMobile) {\n      classes.push(`s-fb-field-${this.cData.columnsMobile}`);\n    }\n\n    if (this.cData.class) {\n      classes.push(this.cData.class);\n    }\n\n    this.class = classes.join(' ');\n  }\n\n  @HostBinding('class')\n  class: string;\n}\n","import {Observable, of} from 'rxjs';\nimport {map} from 'rxjs/operators';\nimport {FieldData} from '../interfaces/field-data.interface';\nimport {safeEval} from './safe-eval';\n\nexport interface HSD {\n  type?: 'html' | 'static' | 'dynamic';\n  value: string;\n}\n\nexport function getHsd(\n  key: string,\n  data: FieldData\n): Observable<string> {\n  if (data[key]) {\n\n    let item: any;\n\n    switch (data[key].type) {\n      case 'dynamic':\n        item = safeEval(data[key].value);\n\n        if (item) {\n          return data.form.valueChanges\n            .pipe(\n              map(value =>\n                item(\n                  data.control.value,\n                  value\n                )\n              )\n            );\n        }\n\n        break;\n      case 'static':\n        item = safeEval(data[key].value);\n\n        if (item) {\n          return of(item(\n            data.control.value,\n            data.form.getRawValue()\n          ));\n        }\n        break;\n      case 'html':\n      default:\n        return of(data[key].value);\n    }\n  }\n\n  return of('');\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Inject,\n  OnInit\n} from '@angular/core';\nimport {BehaviorSubject, Observable, of} from 'rxjs';\nimport {map, startWith, switchMap, tap} from 'rxjs/operators';\nimport {DbService} from '../../services/db.service';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {WhereFilter} from '../../interfaces/where-filter.interface';\nimport {COMPONENT_DATA} from '../../utils/create-component-injector';\nimport {getHsd, HSD} from '../../utils/get-hsd';\n\ninterface AutocompleteData extends FieldData {\n  dataSet: Array<{name: string; value: any}>;\n  populate?: {\n    collection: string;\n    nameKey: string;\n    valueKey?: string;\n    orderBy?: string;\n    filter?: WhereFilter;\n  };\n  autocomplete?: string;\n  suffix?: HSD;\n  prefix?: HSD;\n}\n\n@Component({\n  selector: 'fb-autocomplete',\n  templateUrl: './autocomplete.component.html',\n  styleUrls: ['./autocomplete.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AutocompleteComponent extends FieldComponent<AutocompleteData>\n  implements OnInit {\n  constructor(\n    @Inject(COMPONENT_DATA) public cData: AutocompleteData,\n    private dbService: DbService\n  ) {\n    super(cData);\n  }\n\n  filteredSet$: Observable<Array<{name: string; value: string}>>;\n  loading$ = new BehaviorSubject(true);\n  prefix$: Observable<string>;\n  suffix$: Observable<string>;\n\n  ngOnInit() {\n\n    this.prefix$ = getHsd('prefix', this.cData);\n    this.suffix$ = getHsd('suffix', this.cData);\n\n    let dataSet$: Observable<Array<{name: string; value: string}>>;\n\n    if (this.cData.populate) {\n\n      const {populate} = this.cData;\n\n      dataSet$ = this.dbService\n        .getDocumentsSimple(\n          this.cData.populate.collection,\n          this.cData.populate.orderBy,\n          this.cData.populate.filter\n        )\n        .pipe(\n          map(docs =>\n            docs.map(doc => ({\n              value: doc[populate.valueKey || 'id'],\n              name: doc[populate.nameKey]\n            }))\n          ),\n          tap(() => this.loading$.next(false))\n        );\n    } else {\n      dataSet$ = of(this.cData.dataSet);\n    }\n\n    this.filteredSet$ = dataSet$.pipe(\n      switchMap(dataSet =>\n        this.cData.control.valueChanges.pipe(\n          startWith(this.cData.control.value),\n          map(value => {\n            if (!value) {\n              return dataSet;\n            }\n\n            value = value.toLowerCase();\n\n            return dataSet.filter(item =>\n              item.name.toLowerCase().includes(value)\n            );\n          })\n        )\n      )\n    );\n  }\n}\n","import {Component, ChangeDetectionStrategy} from '@angular/core';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\n\n@Component({\n  selector: 'fb-checkbox',\n  templateUrl: './checkbox.component.html',\n  styleUrls: ['./checkbox.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CheckboxComponent extends FieldComponent<FieldData> {}\n","import {ChangeDetectionStrategy, Component, OnInit} from '@angular/core';\nimport {MatChipInputEvent} from '@angular/material/chips';\nimport {Observable} from 'rxjs';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {getHsd, HSD} from '../../utils/get-hsd';\n\ninterface ChipsData extends FieldData {\n  selectable: boolean;\n  removable: boolean;\n  addOnBlur: boolean;\n  unique: boolean;\n  autocomplete?: string;\n  suffix?: HSD;\n  prefix?: HSD;\n}\n\n@Component({\n  selector: 'fb-chips',\n  templateUrl: './chips.component.html',\n  styleUrls: ['./chips.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ChipsComponent extends FieldComponent<ChipsData>\n  implements OnInit {\n\n  data: string[] = [];\n  removable: boolean;\n  prefix$: Observable<string>;\n  suffix$: Observable<string>;\n\n  ngOnInit() {\n    this.data = this.cData.control.value;\n    this.removable = this.cData.hasOwnProperty('removable') ? this.cData.removable : true;\n    this.prefix$ = getHsd('prefix', this.cData);\n    this.suffix$ = getHsd('suffix', this.cData);\n  }\n\n  add(event: MatChipInputEvent) {\n    const value = (event.value || '').trim();\n    const input = event.input;\n\n    if (value && (this.cData.unique ? !this.data.includes(value) : true)) {\n      this.data.push(value);\n      this.cData.control.setValue(this.data);\n    }\n\n    if (input) {\n      input.value = '';\n    }\n  }\n\n  remove(chip: string) {\n    const index = this.cData.control.value.indexOf(chip);\n\n    if (index >= 0) {\n      this.data.splice(index, 1);\n      this.cData.control.setValue(this.data);\n    }\n  }\n}\n","import {\n  AbstractControl,\n  FormArray,\n  FormControl,\n  FormGroup\n} from '@angular/forms';\n\n/**\n * Deep clones the given AbstractControl, preserving values, validators, async validators, and disabled status.\n * @param control AbstractControl\n * @returns AbstractControl\n */\nexport function cloneAbstractControl<T extends AbstractControl>(control: T): T {\n  let newControl: T;\n\n  if (control instanceof FormGroup) {\n    const formGroup = new FormGroup(\n      {},\n      control.validator,\n      control.asyncValidator\n    );\n    const controls = control.controls;\n\n    Object.keys(controls).forEach(key => {\n      formGroup.addControl(key, cloneAbstractControl(controls[key]));\n    });\n\n    newControl = formGroup as any;\n  } else if (control instanceof FormArray) {\n    const formArray = new FormArray(\n      [],\n      control.validator,\n      control.asyncValidator\n    );\n\n    control.controls.forEach(formControl =>\n      formArray.push(cloneAbstractControl(formControl))\n    );\n\n    newControl = formArray as any;\n  } else if (control instanceof FormControl) {\n    newControl = new FormControl(\n      control.value,\n      control.validator,\n      control.asyncValidator\n    ) as any;\n  } else {\n    throw new Error('Error: unexpected control value');\n  }\n\n  if (control.disabled) {\n    newControl.disable({emitEvent: false});\n  }\n\n  return newControl;\n}\n","import {DatePipe} from '@angular/common';\nimport {ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject, OnInit} from '@angular/core';\nimport {FormControl, FormGroup, Validators} from '@angular/forms';\nimport {of} from 'rxjs';\nimport {tap} from 'rxjs/operators';\nimport {FieldComponent} from '../../field/field.component';\nimport {FormBuilderService} from '../../form-builder.service';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {COMPONENT_DATA} from '../../utils/create-component-injector';\nimport {cloneAbstractControl} from '../../utils/clone-abstract-control';\n\ninterface DateData extends FieldData {\n  startYear?: number;\n  startAt?: number;\n  touchUi?: boolean;\n  startView?: 'month' | 'year' | 'multi-year';\n  format?: 'number' | string;\n  autocomplete?: string;\n  includeTime?: boolean;\n  labelHours?: string;\n  labelMinutes?: string;\n  placeholderHours?: string;\n  placeholderMinutes?: string;\n}\n\n@Component({\n  selector: 'fb-date-field',\n  templateUrl: './date-field.component.html',\n  styleUrls: ['./date-field.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DateFieldComponent extends FieldComponent<DateData>\n  implements OnInit {\n  constructor(\n    @Inject(COMPONENT_DATA) public cData: DateData,\n    private cdr: ChangeDetectorRef,\n    private formBuilderService: FormBuilderService\n  ) {\n    super(cData);\n  }\n\n  form: FormGroup;\n  startDate: Date;\n  entryControl: FormControl;\n  hoursControl: FormControl;\n  minutesControl: FormControl;\n\n  ngOnInit() {\n    this.formBuilderService.saveComponents.push(this);\n    this.startDate = this.cData.startAt\n      ? new Date(this.cData.startAt)\n      : new Date();\n\n    const date = new Date(this.cData.control.value);\n\n    this.entryControl = cloneAbstractControl(this.cData.control);\n    this.hoursControl = new FormControl(\n      {value: date.getHours() || 0, disabled: this.cData.control.disabled},\n      [Validators.min(0), Validators.max(23)]\n    );\n    this.minutesControl = new FormControl(\n      {value: date.getMinutes() || 0, disabled: this.cData.control.disabled},\n      [Validators.min(0), Validators.max(59)]\n    );\n\n    /**\n     * Dirty hack for getting numbers to display properly might need revisiting\n     */\n    if (\n      typeof this.entryControl.value === 'number' ||\n      typeof this.entryControl.value === 'string'\n    ) {\n      this.entryControl.setValue(new Date(this.entryControl.value));\n    }\n  }\n\n  save() {\n    return of({}).pipe(\n      tap(() => {\n        let value = this.entryControl.value;\n\n        if (value) {\n          if (this.cData.includeTime) {\n            value.setHours(this.hoursControl.value || 0);\n            value.setMinutes(this.minutesControl.value || 0);\n          }\n\n          if (this.cData.format) {\n            if (this.cData.format === 'number') {\n              value = value.getTime();\n            } else {\n              const pipe = new DatePipe('en');\n\n              value = pipe.transform(value, this.cData.format);\n            }\n          }\n        }\n\n        this.cData.control.setValue(value);\n      })\n    );\n  }\n}\n","import {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\nimport {ChangeDetectionStrategy, Component, OnInit} from '@angular/core';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {Option} from '../../interfaces/option.interface';\n\ninterface DragData extends FieldData {\n  options: Option[];\n}\n\n@Component({\n  selector: 'fb-draggable-list',\n  templateUrl: './draggable-list.component.html',\n  styleUrls: ['./draggable-list.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DraggableListComponent extends FieldComponent<DragData>\n  implements OnInit {\n  ngOnInit() {\n    if (this.cData.control.value.length) {\n      this.cData.options.sort((optionOne, optionTwo) => {\n        const indexOne = this.cData.control.value.indexOf(optionOne);\n        const indexTwo = this.cData.control.value.indexOf(optionTwo);\n        return indexTwo - indexOne;\n      });\n    }\n  }\n\n  drop(event: CdkDragDrop<string[]>) {\n    moveItemInArray(\n      this.cData.options,\n      event.previousIndex,\n      event.currentIndex\n    );\n\n    this.cData.control.setValue(\n      this.cData.options.map(val => {\n        return val.value;\n      })\n    );\n  }\n}\n","export abstract class StorageService {\n  storage: any;\n\n  upload(path: string, data: any, metadata?: any): any {}\n}\n","/**\n * Remove all characters that are not alphanumeric.\n *\n * In case of not finding any alphanumeric characters\n * return string `file-{random number}`\n *\n * @param name\n * File name to format\n */\nexport const formatFileName = (name: string): string => {\n  const extension = name.slice(name.lastIndexOf('.'));\n  name = name.slice(0, name.lastIndexOf('.'));\n  name = (name.match(/[a-zA-Z\\d.]/g) || []).join('');\n  return !!name.length ? name + extension : `file-${Math.floor(Math.random() * 10 ** 5) + 1}${extension}`;\n};\n","export const parseSize = (size: string | number): number => {\n  if (typeof size === 'number') {\n    return size;\n  }\n\n  const KB = 1024;\n  const MB = KB ** 2;\n\n  const num = parseFloat(size);\n  const unit = size.replace(/[0-9]/g, '').toLowerCase();\n\n  switch (unit) {\n    case 'kb': {\n      return num * KB;\n    }\n    case 'mb': {\n      return num * MB;\n    }\n    default: {\n      return 0;\n    }\n  }\n};\n","import {ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Inject, OnInit, ViewChild} from '@angular/core';\nimport {MatSnackBar} from '@angular/material/snack-bar';\nimport {TranslocoService} from '@ngneat/transloco';\nimport {from, of, throwError} from 'rxjs';\nimport {switchMap, tap} from 'rxjs/operators';\nimport {FieldComponent} from '../../field/field.component';\nimport {FormBuilderService} from '../../form-builder.service';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {StorageService} from '../../services/storage.service';\nimport {COMPONENT_DATA} from '../../utils/create-component-injector';\nimport {formatFileName} from '../../utils/format-file-name';\nimport {parseSize} from '../../utils/parse-size';\n\ninterface FileData extends FieldData {\n  emptyLabel?: string;\n  preventClear?: boolean;\n  allowedFileTypes?: string[];\n  forbiddenFileTypes?: string[];\n  minSize?: string | number;\n  maxSize?: string | number;\n}\n\n@Component({\n  selector: 'fb-file',\n  templateUrl: './file.component.html',\n  styleUrls: ['./file.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FileComponent extends FieldComponent<FileData> implements OnInit {\n  @ViewChild('file', {static: true})\n  fileEl: ElementRef<HTMLInputElement>;\n  value: File;\n  name: string;\n  emptyLabel: string;\n\n  allowedFileTypes: string[];\n  forbiddenFileTypes: string[];\n  minSizeBytes: number;\n  maxSizeBytes: number;\n\n  constructor(\n    @Inject(COMPONENT_DATA) public cData: FileData,\n    private storage: StorageService,\n    private cdr: ChangeDetectorRef,\n    private formBuilderService: FormBuilderService,\n    private transloco: TranslocoService,\n    private snackBar: MatSnackBar\n  ) {\n    super(cData);\n  }\n\n  ngOnInit() {\n    if (this.cData.control.value) {\n      this.name = this.cData.control.value;\n    }\n\n    this.emptyLabel = (this.cData.hasOwnProperty('emptyLabel') ? this.cData.emptyLabel : 'FIELDS.FILE.EMPTY') as string;\n\n    this.formBuilderService.saveComponents.push(this);\n\n    this.allowedFileTypes = this.cData.allowedFileTypes || [];\n    this.forbiddenFileTypes = this.cData.forbiddenFileTypes || [];\n    this.minSizeBytes = this.cData.minSize ? parseSize(this.cData.minSize) : 0;\n    this.maxSizeBytes = this.cData.maxSize ? parseSize(this.cData.maxSize) : 0;\n  }\n\n  errorSnack(message: string = 'GENERAL.ERROR', dismiss: string = 'GENERAL.DISMISS') {\n    this.snackBar.open(\n      this.transloco.translate(message),\n      this.transloco.translate(dismiss),\n      {\n        panelClass: 'snack-bar-error',\n        duration: 5000\n      }\n    );\n  }\n\n  fileChange(ev: Event) {\n    const el = ev.target as HTMLInputElement;\n    const file = Array.from(el.files as FileList)[0] as File;\n\n    Object.defineProperty(file, 'name', {\n      writable: true,\n      value: formatFileName(file.name)\n    });\n\n    if (!this.allowedFileTypes.includes(file.type) && !!this.allowedFileTypes.length) {\n      this.errorSnack('FIELDS.FILE.INVALID_FILE_FORMAT');\n      return throwError('Invalid File Format');\n    }\n\n    if (this.forbiddenFileTypes.includes(file.type)) {\n      this.errorSnack('FIELDS.FILE.FORBIDDEN_FILE_FORMAT');\n      return throwError('Forbidden File Format');\n    }\n\n    if (file.size < this.minSizeBytes) {\n      this.errorSnack('FIELDS.FILE.BELOW_SIZE');\n      return throwError('File below minimal allowed size');\n    }\n\n    if (file.size > this.maxSizeBytes && !!this.maxSizeBytes) {\n      this.errorSnack('FIELDS.FILE.EXCEED_SIZE');\n      return throwError('File exceeding allowed size');\n    }\n\n    this.value = file;\n    if (this.value) {\n      this.name = this.value.name;\n    }\n    el.value = '';\n  }\n\n  clear() {\n    this.name = '';\n    this.cData.control.setValue('');\n  }\n\n  save(moduleId: string, documentId: string) {\n    if (this.value) {\n      const name = [\n        moduleId,\n        documentId,\n        this.value.name\n      ]\n        .join('-');\n\n      return from(\n        this.storage.upload(name, this.value, {\n          contentType: this.value.type,\n          customMetadata: {\n            moduleId,\n            documentId\n          }\n        })\n      ).pipe(\n        switchMap((res: any) => res.ref.getDownloadURL()),\n        tap(url => this.cData.control.setValue(url))\n      );\n    } else {\n      return of({});\n    }\n  }\n}\n","import {GeneratedImage} from '../interfaces/generated-image.interface';\n\nexport function formatGeneratedImages(data: GeneratedImage[]) {\n  return data.reduce((acc, cur, index) => {\n    acc[`generate_${index + 1}`] = Object.entries(cur).reduce((generated, [key, value]) => {\n      generated += `----${key}:${value}`;\n      return generated;\n    }, '');\n    return acc;\n  }, {}) as {\n    [key: string]: string;\n  };\n}\n","import {InjectionToken} from '@angular/core';\n\nexport const STORAGE_URL = new InjectionToken<{}>('STORAGE_URL');\n","/**\n * Switches the location of two items\n * in an array\n */\nexport function switchItemLocations(\n  items: any[],\n  previousIndex: number,\n  currentIndex: number\n) {\n  const itemOne = items[previousIndex];\n  const itemTwo = items[currentIndex];\n\n  items[currentIndex] = itemOne;\n  items[previousIndex] = itemTwo;\n}\n","import {Observable} from 'rxjs';\n\nexport function readFile(blob: Blob): Observable<string> {\n  return new Observable(obs => {\n    if (!(blob instanceof Blob)) {\n      obs.error(new Error('`blob` must be an instance of File or Blob.'));\n      return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onerror = err => obs.error(err);\n    reader.onabort = err => obs.error(err);\n    reader.onload = () => obs.next(reader.result as string);\n    reader.onloadend = () => obs.complete();\n\n    return reader.readAsDataURL(blob);\n  });\n}\n","import {CdkDrag, CdkDragDrop, CdkDragMove, CdkDropList, CdkDropListGroup, moveItemInArray} from '@angular/cdk/drag-drop';\nimport {ViewportRuler} from '@angular/cdk/overlay';\nimport {HttpClient} from '@angular/common/http';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Inject,\n  OnInit,\n  Optional,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport {MatDialog} from '@angular/material/dialog';\nimport {MatSnackBar} from '@angular/material/snack-bar';\nimport {TranslocoService} from '@ngneat/transloco';\nimport {forkJoin, from, of, throwError} from 'rxjs';\nimport {catchError, map, switchMap, tap} from 'rxjs/operators';\nimport {FieldComponent} from '../../field/field.component';\nimport {FormBuilderService} from '../../form-builder.service';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {GeneratedImage} from '../../interfaces/generated-image.interface';\nimport {StorageService} from '../../services/storage.service';\nimport {COMPONENT_DATA} from '../../utils/create-component-injector';\nimport {formatFileName} from '../../utils/format-file-name';\nimport {formatGeneratedImages} from '../../utils/format-generated-images';\nimport {parseSize} from '../../utils/parse-size';\nimport {STORAGE_URL} from '../../utils/storage-url';\nimport {switchItemLocations} from '../../utils/switch-item-locations';\nimport {readFile} from './read-file';\n\ninterface GalleryData extends FieldData {\n  allowUrl?: boolean;\n  allowServerUpload?: boolean;\n  generatedImages?: GeneratedImage[];\n  allowedImageTypes?: string[];\n  forbiddenImageTypes?: string[];\n  minSize?: string | number;\n  maxSize?: string | number;\n}\n\n@Component({\n  selector: 'fb-gallery',\n  templateUrl: './gallery.component.html',\n  styleUrls: ['./gallery.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GalleryComponent extends FieldComponent<GalleryData>\n  implements OnInit, AfterViewInit {\n  constructor(\n    @Inject(COMPONENT_DATA)\n    public cData: GalleryData,\n    @Optional()\n    @Inject(STORAGE_URL)\n    private storageUrl: string,\n    private dialog: MatDialog,\n    private cdr: ChangeDetectorRef,\n    private http: HttpClient,\n    private storage: StorageService,\n    private formBuilderService: FormBuilderService,\n    private viewportRuler: ViewportRuler,\n    private transloco: TranslocoService,\n    private snackBar: MatSnackBar\n  ) {\n    super(cData);\n  }\n\n  @ViewChild(CdkDropListGroup, {static: true})\n  listGroup: CdkDropListGroup<CdkDropList>;\n  @ViewChild(CdkDropList, {static: true})\n  placeholder: CdkDropList;\n  @ViewChild('modal', {static: true})\n  modalTemplate: TemplateRef<any>;\n  @ViewChild('imagesSort', {static: true})\n  imagesSort: TemplateRef<any>;\n  @ViewChild('file', {static: true})\n  fileEl: ElementRef<HTMLInputElement>;\n  target: CdkDropList | null;\n  targetIndex: number;\n  source: CdkDropList | null;\n  sourceIndex: number;\n  activeContainer: any;\n  files: File[] = [];\n  toRemove: any[] = [];\n\n  allowedImageTypes: string[];\n  forbiddenImageTypes: string[];\n  minSizeBytes: number;\n  maxSizeBytes: number;\n\n  ngOnInit() {\n    this.formBuilderService.saveComponents.push(this);\n\n    this.allowedImageTypes = this.cData.allowedImageTypes || [];\n    this.forbiddenImageTypes = this.cData.forbiddenImageTypes || [];\n    this.minSizeBytes = this.cData.minSize ? parseSize(this.cData.minSize) : 0;\n    this.maxSizeBytes = this.cData.maxSize ? parseSize(this.cData.maxSize) : 0;\n  }\n\n  ngAfterViewInit() {\n    const phElement = this.placeholder.element.nativeElement;\n    const {parentElement} = phElement as any;\n\n    phElement.style.display = 'none';\n    parentElement.removeChild(phElement);\n  }\n\n  openUploadDialog() {\n    this.dialog.open(this.modalTemplate, {\n      width: '420px'\n    });\n  }\n\n  addImage(image: string) {\n    this.http\n      .get(image, {\n        withCredentials: false,\n        responseType: 'blob'\n      })\n      .pipe(\n        switchMap((blob: Blob) => {\n          const type = blob.type.split('/')[1].toLowerCase();\n          if (!this.allowedImageTypes.includes(type) && !!this.allowedImageTypes.length) {\n            return throwError('Invalid Image Format');\n          }\n\n          if (this.forbiddenImageTypes.includes(type)) {\n            return throwError('Forbidden Image Format');\n          }\n\n          if (blob.size < this.minSizeBytes) {\n            return throwError('Image below minimal allowed size');\n          }\n\n          if (blob.size > this.maxSizeBytes && !!this.maxSizeBytes) {\n            return throwError('Image exceeding allowed size');\n          }\n\n          return of(blob);\n        }),\n        this.formBuilderService.notify({\n          error: 'FIELDS.GALLERY.UPLOAD_ERROR',\n          success: null\n        }))\n      .subscribe(res => {\n        const urlCreator = window.URL || (window as any).webkitURL;\n        const value = this.cData.control.value;\n\n        value.push({\n          data: urlCreator.createObjectURL(res),\n          live: true\n        });\n\n        this.cData.control.setValue(value);\n        this.cdr.detectChanges();\n      });\n  }\n\n  openFileUpload() {\n    this.fileEl.nativeElement.click();\n  }\n\n  openSortImages() {\n    this.dialog.open(this.imagesSort, {\n      width: '800px'\n    });\n  }\n\n  drop(event: CdkDragDrop<string[]>) {\n    const value = this.cData.control.value;\n    switchItemLocations(value, event.previousIndex, event.currentIndex);\n    this.cData.control.setValue(value);\n    this.cdr.detectChanges();\n  }\n\n  move(up = false, index: number) {\n    const currentIndex = up ? index - 1 : index + 1;\n    const value = this.cData.control.value;\n    moveItemInArray(value, index, currentIndex);\n    this.cData.control.setValue(value);\n    this.cdr.detectChanges();\n  }\n\n  errorSnack(message: string = 'GENERAL.ERROR', dismiss: string = 'GENERAL.DISMISS') {\n    this.snackBar.open(\n      this.transloco.translate(message),\n      this.transloco.translate(dismiss),\n      {\n        panelClass: 'snack-bar-error',\n        duration: 5000\n      }\n    );\n  }\n\n  filesUploaded(el: HTMLInputElement | FileList) {\n    const files = Array.from((el instanceof FileList ? el : el.files) as FileList);\n    for (const file of files) {\n      Object.defineProperty(file, 'name', {\n        writable: true,\n        value: formatFileName(file.name)\n      });\n\n      const type = file.type.split('/')[1].toLowerCase();\n\n      if (!this.allowedImageTypes.includes(type) && !!this.allowedImageTypes.length) {\n        this.errorSnack('FIELDS.GALLERY.INVALID_IMAGE_FORMAT');\n        return throwError('Invalid Image Format');\n      }\n\n      if (this.forbiddenImageTypes.includes(type)) {\n        this.errorSnack('FIELDS.GALLERY.FORBIDDEN_IMAGE_FORMAT');\n        return throwError('Forbidden Image Format');\n      }\n\n      if (file.size < this.minSizeBytes) {\n        this.errorSnack('FIELDS.GALLERY.BELOW_SIZE');\n        return throwError('Image below minimal allowed size');\n      }\n\n      if (file.size > this.maxSizeBytes && !!this.maxSizeBytes) {\n        this.errorSnack('FIELDS.GALLERY.EXCEED_SIZE');\n        return throwError('Image exceeding allowed size');\n      }\n    }\n\n    forkJoin(\n      files.map(file =>\n        readFile(file).pipe(\n          map(data => ({\n            data,\n            pushToLive: file,\n            live: false\n          }))\n        )\n      )\n    ).subscribe(\n      fls => {\n        const value = this.cData.control.value;\n        value.push(...fls);\n        this.cData.control.setValue(value);\n\n        if (!(el instanceof FileList)) {\n          el.value = '';\n        }\n\n        this.cdr.detectChanges();\n      },\n      () => {\n        if (!(el instanceof FileList)) {\n          el.value = '';\n        }\n      }\n    );\n  }\n\n  removeImage(index: number, item: any) {\n    if (item.live && item.data.includes(this.storageUrl)) {\n      this.toRemove.push(item.data);\n    }\n\n    this.cData.control.value.splice(index, 1);\n  }\n\n  sortDrop(event: CdkDragDrop<string[]>) {\n    const value = this.cData.control.value;\n    moveItemInArray(value, event.previousIndex, event.currentIndex);\n    this.cData.control.setValue(value);\n  }\n\n  /**\n   * Drag and Drop\n   */\n  dragMoved(e: CdkDragMove) {\n    const point = this.getPointerPositionOnPage(e.event);\n\n    this.listGroup._items.forEach(dropList => {\n      if (__isInsideDropListClientRect(dropList, point.x, point.y)) {\n        this.activeContainer = dropList;\n        return;\n      }\n    });\n  }\n\n  dropListDropped() {\n    if (!this.target) {\n      return;\n    }\n\n    const phElement = this.placeholder.element.nativeElement;\n    const parent: any = phElement.parentElement;\n\n    phElement.style.display = 'none';\n\n    const {element} = this.source as any;\n\n    parent.removeChild(phElement);\n    parent.appendChild(phElement);\n    parent.insertBefore(element.nativeElement, parent.children[this.sourceIndex]);\n\n    this.target = null;\n    this.source = null;\n\n    if (this.sourceIndex !== this.targetIndex) {\n      const value = this.cData.control.value;\n      moveItemInArray(value, this.sourceIndex, this.targetIndex);\n      this.cData.control.setValue(value);\n    }\n  }\n\n  /** Determines the point of the page that was touched by the user. */\n  getPointerPositionOnPage(event: MouseEvent | TouchEvent) {\n    // `touches` will be empty for start/end events so we have to fall back to `changedTouches`.\n    const point = __isTouchEvent(event) ? (event.touches[0] || event.changedTouches[0]) : event;\n    const scrollPosition = this.viewportRuler.getViewportScrollPosition();\n\n    return {\n      x: point.pageX - scrollPosition.left,\n      y: point.pageY - scrollPosition.top\n    };\n  }\n\n  /**\n   * Executes all uploads/removes to persist\n   * the changes on server\n   */\n  save(moduleId: string, documentId: string) {\n    if (\n      !this.toRemove.length &&\n      !this.cData.control.value ||\n      !this.cData.control.value.find((val: any) => !val.live)\n    ) {\n      return of([]);\n    }\n\n    return forkJoin([\n      ...this.toRemove.map(file =>\n        from(this.storage.storage.refFromURL(file).delete()).pipe(\n          /**\n           * Dont' fail if files didn't delete\n           */\n          catchError(() => of([]))\n        )\n      ),\n      ...this.cData.control.value.reduce((acc: any[], cur: any) => {\n        if (cur.live !== undefined && !cur.live) {\n\n          const name = [\n            moduleId,\n            documentId,\n            cur.pushToLive.name\n          ]\n            .join('-');\n\n          acc.push(\n            from(\n              this.storage.upload(name, cur.pushToLive, {\n                contentType: cur.pushToLive.type,\n                customMetadata: {\n                  moduleId,\n                  documentId,\n                  ...this.cData.generatedImages &&\n                  formatGeneratedImages(this.cData.generatedImages)\n                }\n              })\n            ).pipe(\n              switchMap((task: any) => task.ref.getDownloadURL()),\n              tap(url => {\n                cur.data = url;\n              })\n            )\n          );\n        } else {\n          acc.push(cur);\n        }\n\n        return acc;\n      }, [])\n    ]).pipe(\n      tap(() =>\n        this.cData.control.setValue(\n          this.cData.control.value.map((item: any) => (item.data ? item.data : item))\n        )\n      )\n    );\n  }\n}\n\nfunction __indexOf(collection: any, node: any) {\n  return Array.prototype.indexOf.call(collection, node);\n}\n\n/** Determines whether an event is a touch event. */\nfunction __isTouchEvent(event: MouseEvent | TouchEvent): event is TouchEvent {\n  return event.type.startsWith('touch');\n}\n\nfunction __isInsideDropListClientRect(dropList: CdkDropList, x: number, y: number) {\n  const {top, bottom, left, right} = dropList.element.nativeElement.getBoundingClientRect();\n  return y >= top && y <= bottom && x >= left && x <= right;\n}\n","import {ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Inject, OnInit, ViewChild} from '@angular/core';\nimport {FormControl} from '@angular/forms';\nimport {MatSnackBar} from '@angular/material/snack-bar';\nimport {DomSanitizer, SafeResourceUrl} from '@angular/platform-browser';\nimport {TranslocoService} from '@ngneat/transloco';\nimport {from, of, throwError} from 'rxjs';\nimport {switchMap, tap} from 'rxjs/operators';\nimport {FieldComponent} from '../../field/field.component';\nimport {FormBuilderService} from '../../form-builder.service';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {GeneratedImage} from '../../interfaces/generated-image.interface';\nimport {StorageService} from '../../services/storage.service';\nimport {COMPONENT_DATA} from '../../utils/create-component-injector';\nimport {formatFileName} from '../../utils/format-file-name';\nimport {formatGeneratedImages} from '../../utils/format-generated-images';\nimport {parseSize} from '../../utils/parse-size';\n\ninterface ImageData extends FieldData {\n  preventServerUpload?: boolean;\n  generatedImages?: GeneratedImage[];\n  allowedImageTypes?: string[];\n  forbiddenImageTypes?: string[];\n  minSize?: string | number;\n  maxSize?: string | number;\n}\n\n@Component({\n  selector: 'fb-image',\n  templateUrl: './image.component.html',\n  styleUrls: ['./image.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ImageComponent extends FieldComponent<ImageData>\n  implements OnInit {\n  constructor(\n    @Inject(COMPONENT_DATA) public cData: ImageData,\n    private storage: StorageService,\n    private cdr: ChangeDetectorRef,\n    private formBuilderService: FormBuilderService,\n    private transloco: TranslocoService,\n    private snackBar: MatSnackBar,\n    private domSanitizer: DomSanitizer\n  ) {\n    super(cData);\n  }\n\n  @ViewChild('file', {static: true})\n  fileEl: ElementRef<HTMLInputElement>;\n  value: File | null;\n  imageUrl: FormControl;\n  disInput = false;\n  imageSrc: SafeResourceUrl;\n\n  allowedImageTypes: string[];\n  forbiddenImageTypes: string[];\n  minSizeBytes: number;\n  maxSizeBytes: number;\n\n  ngOnInit() {\n    this.imageUrl = new FormControl(this.cData.control.value);\n    this.formBuilderService.saveComponents.push(this);\n\n    this.allowedImageTypes = this.cData.allowedImageTypes || [];\n    this.forbiddenImageTypes = this.cData.forbiddenImageTypes || [];\n    this.minSizeBytes = this.cData.minSize ? parseSize(this.cData.minSize) : 0;\n    this.maxSizeBytes = this.cData.maxSize ? parseSize(this.cData.maxSize) : 0;\n  }\n\n  errorSnack(message: string = 'GENERAL.ERROR', dismiss: string = 'GENERAL.DISMISS') {\n    this.snackBar.open(\n      this.transloco.translate(message),\n      this.transloco.translate(dismiss),\n      {\n        panelClass: 'snack-bar-error',\n        duration: 5000\n      }\n    );\n  }\n\n  openFileUpload() {\n    this.fileEl.nativeElement.click();\n  }\n\n  filesImage(event: Event) {\n    const el = event.target as HTMLInputElement;\n    const image = Array.from(el.files as FileList)[0] as File;\n\n    Object.defineProperty(image, 'name', {\n      writable: true,\n      value: formatFileName(image.name)\n    });\n\n    if (!this.allowedImageTypes.includes(image.type) && !!this.allowedImageTypes.length) {\n      this.errorSnack('FIELDS.GALLERY.INVALID_IMAGE_FORMAT');\n      return throwError('Invalid Image Format');\n    }\n\n    if (this.forbiddenImageTypes.includes(image.type)) {\n      this.errorSnack('FIELDS.GALLERY.FORBIDDEN_IMAGE_FORMAT');\n      return throwError('Forbidden Image Format');\n    }\n\n    if (image.size < this.minSizeBytes) {\n      this.errorSnack('FIELDS.GALLERY.BELOW_SIZE');\n      return throwError('Image below minimal allowed size');\n    }\n\n    if (image.size > this.maxSizeBytes && !!this.maxSizeBytes) {\n      this.errorSnack('FIELDS.GALLERY.EXCEED_SIZE');\n      return throwError('Image exceeding allowed size');\n    }\n\n    this.value = image;\n    this.disInput = true;\n    this.imageUrl.setValue(this.value.name);\n\n    const reader = new FileReader();\n    reader.onload = () => {\n      this.imageSrc = this.domSanitizer.bypassSecurityTrustResourceUrl(\n        reader.result as string\n      );\n      this.cdr.detectChanges();\n    };\n    reader.readAsDataURL(this.value);\n    el.value = '';\n  }\n\n  remove() {\n    this.imageUrl.setValue('');\n    this.value = null;\n    this.disInput = false;\n    this.cdr.detectChanges();\n  }\n\n  save(moduleId: string, documentId: string) {\n    if (this.value) {\n      if (this.imageUrl.value && this.imageUrl.value !== this.value.name) {\n        return of(this.imageUrl.value).pipe(\n          tap(() => this.cData.control.setValue(this.imageUrl.value))\n        );\n      } else {\n\n        const name = [\n          moduleId,\n          documentId,\n          this.value.name\n        ]\n          .join('-');\n\n        return from(\n          this.storage.upload(name, this.value, {\n            contentType: this.value.type,\n            customMetadata: {\n              moduleId,\n              documentId,\n              ...(this.cData.generatedImages &&\n                formatGeneratedImages(this.cData.generatedImages))\n            }\n          })\n        ).pipe(\n          switchMap((res: any) => res.ref.getDownloadURL()),\n          tap(url => this.cData.control.setValue(url))\n        );\n      }\n    } else {\n      this.cData.control.setValue(this.imageUrl.value);\n      return of({});\n    }\n  }\n}\n","import {ChangeDetectionStrategy, Component, OnInit} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {getHsd, HSD} from '../../utils/get-hsd';\n\ninterface InputData extends FieldData {\n  type: 'text' | 'number' | 'email';\n  autocomplete?: string;\n  suffix?: HSD;\n  prefix?: HSD;\n}\n\n@Component({\n  selector: 'fb-input',\n  templateUrl: './input.component.html',\n  styleUrls: ['./input.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class InputComponent extends FieldComponent<InputData> implements OnInit {\n\n  prefix$: Observable<string>;\n  suffix$: Observable<string>;\n\n  ngOnInit() {\n    this.prefix$ = getHsd('prefix', this.cData);\n    this.suffix$ = getHsd('suffix', this.cData);\n  }\n}\n","import {ChangeDetectionStrategy, Component} from '@angular/core';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {Option} from '../../interfaces/option.interface';\n\ninterface RadioData extends FieldData {\n  options: Option[];\n}\n\n@Component({\n  selector: 'fb-radio',\n  templateUrl: './radio.component.html',\n  styleUrls: ['./radio.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RadioComponent extends FieldComponent<RadioData> {}\n","import {ChangeDetectorRef, Component, Inject, OnInit} from '@angular/core';\nimport {FormControl, Validators} from '@angular/forms';\nimport {of} from 'rxjs';\nimport {tap} from 'rxjs/operators';\nimport {FieldComponent} from '../../field/field.component';\nimport {FormBuilderService} from '../../form-builder.service';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {cloneAbstractControl} from '../../utils/clone-abstract-control';\nimport {COMPONENT_DATA} from '../../utils/create-component-injector';\n\ninterface RangeData extends FieldData {\n  min?: number;\n  max?: number;\n}\n\n@Component({\n  selector: 'fb-range',\n  templateUrl: './range.component.html',\n  styleUrls: ['./range.component.css']\n})\nexport class RangeComponent extends FieldComponent<RangeData> implements OnInit {\n\n  entryControl: FormControl;\n  start: FormControl;\n  end: FormControl;\n  min: Date;\n  max: Date;\n\n  constructor(\n    @Inject(COMPONENT_DATA) public cData: RangeData,\n    private cdr: ChangeDetectorRef,\n    private formBuilderService: FormBuilderService\n  ) {\n    super(cData);\n  }\n\n  ngOnInit(): void {\n    this.formBuilderService.saveComponents.push(this);\n\n    this.min = new Date(this.cData.min || 0);\n    this.max = new Date(this.cData.max || Date.now() * 2);\n    this.entryControl = cloneAbstractControl(this.cData.control);\n\n    this.start = new FormControl(\n      {value: this.entryControl.value.start || '', disabled: this.cData.control.disabled},\n      [Validators.min(this.cData.min || 0)]\n    );\n\n    this.end = new FormControl(\n      {value: this.entryControl.value.end || '', disabled: this.cData.control.disabled},\n      [Validators.max(this.cData.max || Date.now() * 2)]\n    );\n  }\n\n  save() {\n    return of({}).pipe(\n      tap(() => {\n        const start = this.start.value;\n        const end = this.end.value;\n        this.cData.control.setValue({start, end});\n      })\n    );\n  }\n}\n","import {InjectionToken} from '@angular/core';\n\nexport const ADDITIONAL_CONTEXT = new InjectionToken<{}>('ADDITIONAL_CONTEXT');\n","export function parseTemplate(\n  value = '',\n  obj: any = {}\n) {\n\n  if (!value.includes('{{')) {\n    return obj[value];\n  } else {\n\n    const lookUp = new RegExp(`{{(.*?)}}`);\n\n    while (lookUp.test(value)) {\n      value = value.replace(\n        lookUp,\n        (RegExp.$1)\n          .split('.')\n          .reduce((acc, cur) =>\n              acc[cur],\n            obj\n          )\n      );\n    }\n\n    return value;\n  }\n}\n","import {InjectionToken} from '@angular/core';\n\nexport const ROLE = new InjectionToken<{}>('ROLE');\n","import {ChangeDetectionStrategy, Component, Inject, OnInit, Optional} from '@angular/core';\nimport {BehaviorSubject, Observable, of} from 'rxjs';\nimport {map, startWith, switchMap, tap} from 'rxjs/operators';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {Option} from '../../interfaces/option.interface';\nimport {WhereFilter} from '../../interfaces/where-filter.interface';\nimport {DbService} from '../../services/db.service';\nimport {ADDITIONAL_CONTEXT} from '../../utils/additional-context';\nimport {COMPONENT_DATA} from '../../utils/create-component-injector';\nimport {parseTemplate} from '../../utils/parse-template';\nimport {ROLE} from '../../utils/role';\nimport {safeEval} from '../../utils/safe-eval';\n\ninterface Populate {\n  collection?: string;\n  nameKey?: string;\n  valueKey?: string;\n  orderBy?: string;\n\n  /**\n   * A method for mapping all of the results\n   * (items: T[]) => any[]\n   */\n  mapResults?: string;\n\n  /**\n   * If a filter is a string\n   * it represents the id of the document\n   */\n  filter?: WhereFilter | string;\n\n  /**\n   * A stringified function that receives\n   * an object with {fieldData: SelectData, value: form.getRawValue(), role: string, additionalContext?: any}\n   * and should return a WhereFilter.\n   * This doesn't work in combination with the dependency property\n   */\n  dynamicFilter?: string;\n\n  /**\n   * Use this property if the field depends on changes\n   * of a different field in the form\n   */\n  dependency?: {\n    key: string;\n\n    /**\n     * A method for defining query dynamically\n     * (value) => {collection: string; orderBy: string; filter: WhereFilter | string}\n     */\n    method: string;\n  };\n}\n\ninterface SelectData extends FieldData {\n  dataSet?: Option[];\n  multiple?: boolean;\n  populate?: Populate;\n  autocomplete?: string;\n}\n\n@Component({\n  selector: 'fb-select',\n  templateUrl: './select.component.html',\n  styleUrls: ['./select.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SelectComponent extends FieldComponent<SelectData>\n  implements OnInit {\n  dataSet$: Observable<Option[]>;\n  loading$ = new BehaviorSubject(true);\n\n  constructor(\n    @Inject(COMPONENT_DATA) public cData: SelectData,\n    private dbService: DbService,\n    @Inject(ROLE)\n    private role: string,\n    @Optional()\n    @Inject(ADDITIONAL_CONTEXT)\n    private additionalContext: any\n  ) {\n    super(cData);\n  }\n\n  ngOnInit() {\n    if (this.cData.populate) {\n\n      const populate = this.cData.populate as Populate;\n\n      const mapResults = populate.mapResults ? safeEval(populate.mapResults) : null;\n      const documentsMethod = (\n        query?: {\n          collection: string,\n          orderBy: string,\n          filter: WhereFilter | string\n        }\n      ) => {\n\n        this.loading$.next(true);\n\n        if (!query) {\n          this.loading$.next(false);\n          return of([]);\n        }\n\n        if (query.filter && typeof query.filter === 'string') {\n          return this.dbService.getDocument(\n            query.collection,\n            query.filter\n          )\n            .pipe(\n              map(it => {\n                return (mapResults ? mapResults(it) : [it]).map((doc: any) => ({\n                  value: doc[populate.valueKey || 'id'],\n                  name: parseTemplate(\n                    populate.nameKey || 'name',\n                    doc\n                  )\n                }));\n              }),\n              tap(() => this.loading$.next(false))\n            );\n        }\n\n        return this.dbService\n          .getDocumentsSimple(\n            query.collection,\n            query.orderBy,\n            query.filter as WhereFilter\n          )\n          .pipe(\n            map(docs => {\n              if (mapResults) {\n                docs = mapResults(docs, {\n                  fieldData: this.cData,\n                  value: this.cData.form.getRawValue(),\n                  role: this.role,\n                  additionalContext: this.additionalContext\n                });\n              }\n\n              return docs.map(doc => ({\n                value: doc[populate.valueKey || 'id'],\n                name: parseTemplate(\n                  populate.nameKey || 'name',\n                  doc\n                )\n              }));\n            }),\n            tap(() => this.loading$.next(false))\n          );\n      };\n\n      if (populate.dependency) {\n\n        const pointer = this.cData.pointers[populate.dependency.key];\n        const gm = safeEval(populate.dependency.method);\n\n        this.dataSet$ = pointer.control.valueChanges\n          .pipe(\n            startWith(\n              pointer.control.value\n            ),\n            switchMap(value =>\n              documentsMethod(\n                gm(value, {\n                  fieldData: this.cData,\n                  value: this.cData.form.getRawValue(),\n                  role: this.role,\n                  additionalContext: this.additionalContext\n                })\n              )\n            )\n          );\n      } else {\n\n        let filter: WhereFilter = populate.filter as WhereFilter;\n\n        if (populate.dynamicFilter) {\n          filter = safeEval(populate.dynamicFilter)({\n            fieldData: this.cData,\n            value: this.cData.form.getRawValue(),\n            role: this.role,\n            additionalContext: this.additionalContext\n          });\n        }\n\n        this.dataSet$ = documentsMethod({\n          collection: populate.collection,\n          orderBy: populate.orderBy,\n          filter\n        } as any);\n      }\n    } else {\n      this.dataSet$ = of(this.cData.dataSet as any);\n    }\n  }\n}\n","import {ChangeDetectionStrategy, Component, OnInit} from '@angular/core';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\n\ninterface SliderData extends FieldData {\n  validation: {\n    minimum: number;\n    maximum: number;\n  };\n  thumbLabel: boolean;\n  tickInterval: number;\n  starAt: number;\n  endAt: number;\n}\n\n@Component({\n  selector: 'fb-slider',\n  templateUrl: './slider.component.html',\n  styleUrls: ['./slider.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SliderComponent extends FieldComponent<SliderData>\n  implements OnInit {\n  startAt: number;\n  endAt: number;\n\n  ngOnInit() {\n    this.startAt = this.cData.starAt\n      ? this.cData.starAt\n      : this.cData.validation.minimum\n      ? this.cData.validation.minimum\n      : 0;\n    this.endAt = this.cData.endAt\n      ? this.cData.endAt\n      : this.cData.validation.maximum\n      ? this.cData.validation.maximum\n      : 100;\n  }\n}\n","import {Component, ChangeDetectionStrategy, OnInit} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {getHsd, HSD} from '../../utils/get-hsd';\n\ninterface TextareaData extends FieldData {\n  rows?: number;\n  cols?: number;\n  autocomplete?: string;\n  suffix?: HSD;\n  prefix?: HSD;\n}\n\n@Component({\n  selector: 'fb-textarea',\n  templateUrl: './textarea.component.html',\n  styleUrls: ['./textarea.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TextareaComponent extends FieldComponent<TextareaData> implements OnInit {\n\n  prefix$: Observable<string>;\n  suffix$: Observable<string>;\n\n  ngOnInit() {\n    this.prefix$ = getHsd('prefix', this.cData);\n    this.suffix$ = getHsd('suffix', this.cData);\n  }\n}\n","import {ChangeDetectionStrategy, Component} from '@angular/core';\nimport {FieldComponent} from '../../field/field.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\n\n@Component({\n  selector: 'fb-toggle',\n  templateUrl: './toggle.component.html',\n  styleUrls: ['./toggle.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ToggleComponent extends FieldComponent<FieldData> {}\n","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Inject,\n  OnInit,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {MatDialog} from '@angular/material/dialog';\nimport {filter, take} from 'rxjs/operators';\nimport {FieldComponent} from '../../field/field.component';\nimport 'tinymce/plugins/code';\nimport 'tinymce/plugins/print';\nimport 'tinymce/plugins/wordcount';\nimport 'tinymce/plugins/link';\nimport 'tinymce/plugins/image';\nimport 'tinymce/plugins/imagetools';\nimport 'tinymce/plugins/fullscreen';\nimport 'tinymce/plugins/lists';\nimport 'tinymce/plugins/autolink';\nimport 'tinymce/plugins/advlist';\nimport 'tinymce/plugins/table';\nimport {FormBuilderComponent} from '../../form-builder.component';\nimport {FieldData} from '../../interfaces/field-data.interface';\nimport {StorageService} from '../../services/storage.service';\nimport {COMPONENT_DATA} from '../../utils/create-component-injector';\n\ndeclare const tinymce: any;\n\nexport interface WysiwygData extends FieldData {\n  menubar?: string;\n  toolbar?: string;\n  height?: number;\n}\n\n@Component({\n  selector: 'fb-wysiwyg',\n  templateUrl: './wysiwyg.component.html',\n  styleUrls: ['./wysiwyg.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class WysiwygComponent extends FieldComponent<WysiwygData>\n  implements OnInit, AfterViewInit {\n  constructor(\n    @Inject(COMPONENT_DATA) public cData: WysiwygData,\n    private fb: FormBuilder,\n    private dialog: MatDialog,\n    private storage: StorageService,\n    private formBuilderComponent: FormBuilderComponent\n  ) {\n    super(cData);\n  }\n\n  @ViewChild('textarea', {static: true})\n  textarea: ElementRef;\n\n  @ViewChild('youTubeDialog', {static: true})\n  youTubeDialogTemplate: TemplateRef<any>;\n\n  editor: any;\n  ytForm: FormGroup;\n  ytDefault = {\n    fullWidth: true,\n    showPlayerControls: true,\n    privacyEnhancedMode: false,\n    align: 'left'\n  };\n\n  ngOnInit() {\n    this.ytForm = this.fb.group({\n      value: ['', Validators.required],\n      ...this.ytDefault\n    });\n\n    this.cData.control.statusChanges.subscribe(value => {\n      if (value === 'DISABLED') {\n        tinymce.activeEditor.getBody().setAttribute('readonly', true);\n      } else if (this.cData.control.disabled) {\n        tinymce.activeEditor.getBody().setAttribute('readonly', false);\n      }\n    });\n  }\n\n  ngAfterViewInit() {\n    this.registerTiny();\n  }\n\n  private registerTiny() {\n    tinymce.init({\n      target: this.textarea.nativeElement,\n      branding: false,\n      height: this.cData.height || 420,\n      plugins: [\n        'code',\n        'print',\n        'wordcount',\n        'link',\n        'lists',\n        'advlist',\n        'autolink',\n        'image',\n        'imagetools',\n        'fullscreen',\n        'table'\n      ],\n      menubar: this.cData.menubar || 'edit insert view format table tools help',\n      image_advtab: true,\n\n      /**\n       * Link settings\n       */\n      default_link_target: '_blank',\n      readonly: this.cData.control.disabled,\n      toolbar: this.cData.toolbar || [\n        'undo redo',\n        'insert',\n        'styleselect',\n        'bold italic',\n        'forecolor backcolor',\n        'alignleft aligncenter alignright alignjustify',\n        'bullist numlist outdent indent',\n        'link',\n        'image',\n        'youTube',\n        'fullscreen',\n      ].join(' | '),\n\n      images_upload_handler: (blobInfo: any, success: any, failure: any) => {\n        this.storage\n          .upload(\n            blobInfo.filename(),\n            blobInfo.blob(),\n            this.formBuilderComponent.id ? {\n              customMetadata: {\n                collection: this.formBuilderComponent.id\n              }\n            } : {}\n          )\n          .then((data: any) => data.ref.getDownloadURL())\n          .then((url: any) => success(url))\n          .catch((error: any) => failure(error.toString()));\n      },\n\n      setup: (editor: any) => {\n        this.editor = editor;\n\n        editor.on('keyup change', () => {\n          const tinyContent = editor.getContent();\n          this.cData.control.setValue(tinyContent);\n        });\n\n        editor.ui.registry.addButton('youTube', {\n          type: 'button',\n          icon: 'embed',\n          tooltip: 'Embed youtube video',\n          onAction: () => {\n            this.ytForm.reset(this.ytDefault);\n            this.dialog\n              .open(this.youTubeDialogTemplate, {width: '500px'})\n              .afterClosed()\n              .pipe(\n                filter(value => !!value),\n                take(1)\n              )\n              .subscribe(() => {\n                const data = this.ytForm.getRawValue();\n                let url = data.privacyEnhancedMode\n                  ? 'https://www.youtube-nocookie.com/embed/'\n                  : 'https://www.youtube.com/embed/';\n\n                url = url + data.value;\n\n                if (!data.showPlayerControls) {\n                  data.value += '?controls=0';\n                }\n\n                const iframe = `<iframe width=\"560\" height=\"315\" src=\"${url}\" frameborder=\"0\"\n                    allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>`;\n\n                editor.insertContent(\n                  data.fullWidth\n                    ? `<div class=\"evw-full\" style=\"text-align: ${data.align}\">${iframe}</div>`\n                    : `<div style=\"text-align: ${data.align}\">${iframe}</div>`\n                );\n              });\n          }\n        });\n      }\n    });\n  }\n}\n","import {ComponentType} from '../enums/component-type.enum';\nimport {AutocompleteComponent} from '../fields/autocomplete/autocomplete.component';\nimport {CheckboxComponent} from '../fields/checkbox/checkbox.component';\nimport {ChipsComponent} from '../fields/chips/chips.component';\nimport {DateFieldComponent} from '../fields/date-field/date-field.component';\nimport {DraggableListComponent} from '../fields/draggable-list/draggable-list.component';\nimport {FileComponent} from '../fields/file/file.component';\nimport {GalleryComponent} from '../fields/gallery/gallery.component';\nimport {ImageComponent} from '../fields/image/image.component';\nimport {InputComponent} from '../fields/input/input.component';\nimport {RadioComponent} from '../fields/radio/radio.component';\nimport {RangeComponent} from '../fields/range/range.component';\nimport {SelectComponent} from '../fields/select/select.component';\nimport {SliderComponent} from '../fields/slider/slider.component';\nimport {TextareaComponent} from '../fields/textarea/textarea.component';\nimport {ToggleComponent} from '../fields/toggle/toggle.component';\nimport {WysiwygComponent} from '../fields/wysiwyg/wysiwyg.component';\n\n\nexport const COMPONENT_TYPE_COMPONENT_MAP = {\n  [ComponentType.Input]: InputComponent,\n  [ComponentType.Toggle]: ToggleComponent,\n  [ComponentType.Select]: SelectComponent,\n  [ComponentType.File]: FileComponent,\n  [ComponentType.Image]: ImageComponent,\n  [ComponentType.Gallery]: GalleryComponent,\n  [ComponentType.Checkbox]: CheckboxComponent,\n  [ComponentType.Autocomplete]: AutocompleteComponent,\n  [ComponentType.Date]: DateFieldComponent,\n  [ComponentType.Range]: RangeComponent,\n  [ComponentType.Slider]: SliderComponent,\n  [ComponentType.Wysiwyg]: WysiwygComponent,\n  [ComponentType.Draggable]: DraggableListComponent,\n  [ComponentType.Radio]: RadioComponent,\n  [ComponentType.Chips]: ChipsComponent,\n  [ComponentType.Textarea]: TextareaComponent\n};\n","export enum SchemaType {\n  Object = 'object',\n  Array = 'array',\n\n  // Simple\n  String = 'string',\n  Number = 'number',\n  Integer = 'integer',\n  Boolean = 'boolean',\n  Null = 'null'\n}\n","import {AbstractControl} from '@angular/forms';\n\n// @dynamic\nexport class SchemaValidators {\n  static multipleOf(num: number) {\n    return (control: AbstractControl) => {\n      return control.value % num === 0 ? null : {multipleOf: num};\n    };\n  }\n}\n","import {ComponentType} from '../enums/component-type.enum';\nimport {SchemaType} from '../enums/schema-type.enum';\n\nexport function schemaToComponent(schemaType: SchemaType) {\n  switch (schemaType) {\n    case SchemaType.String:\n      return {\n        type: ComponentType.Input,\n        configuration: {\n          type: 'text'\n        }\n      };\n\n    case SchemaType.Number:\n    case SchemaType.Integer:\n      return {\n        type: ComponentType.Input,\n        configuration: {\n          type: 'number'\n        }\n      };\n\n    case SchemaType.Boolean:\n      return {\n        type: ComponentType.Checkbox\n      };\n\n    case SchemaType.Array:\n      return {\n        type: ComponentType.Chips\n      };\n  }\n}\n","import {moveItemInArray} from '@angular/cdk/drag-drop';\nimport {ComponentPortal} from '@angular/cdk/portal';\nimport {Injector} from '@angular/core';\nimport {FormArray, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {COMPONENT_TYPE_COMPONENT_MAP} from '../consts/component-type-component-map.const';\nimport {SchemaType} from '../enums/schema-type.enum';\nimport {State} from '../enums/state.enum';\nimport {FieldComponent} from '../field/field.component';\nimport {CompiledField} from '../interfaces/compiled-field.interface';\nimport {Control} from '../interfaces/control.type';\nimport {Definitions} from '../interfaces/definitions.interface';\nimport {SchemaValidators} from '../validators/schema-validators.class';\nimport {createComponentInjector} from './create-component-injector';\nimport {CustomFields} from './custom-fields';\nimport {safeEval} from './safe-eval';\nimport {schemaToComponent} from './schema-to-component';\n\nexport interface PropertyDefinition {\n  type: SchemaType;\n  description?: string;\n  default?: any;\n}\n\nexport interface StringPropertyDefinition extends PropertyDefinition {\n  type: SchemaType.String;\n  default?: string;\n\n  pattern?: string;\n  minLength?: number;\n  maxLength?: number;\n}\n\nexport interface NumberPropertyDefinition extends PropertyDefinition {\n  type: SchemaType.Number | SchemaType.Integer;\n  default?: number;\n\n  minimum?: number;\n  maximum?: number;\n  exclusiveMinimum?: boolean;\n  exclusiveMaximum?: boolean;\n  multipleOf?: number;\n}\n\nexport interface BooleanPropertyDefinition extends PropertyDefinition {\n  type: SchemaType.Boolean;\n  default?: boolean;\n}\n\nexport interface ArrayPropertyDefinition extends PropertyDefinition {\n  type: SchemaType.Array;\n  items?: any;\n  contains?: any;\n}\n\nexport interface Pointer {\n  key: string;\n  type: SchemaType;\n  control: Control;\n  validation: any;\n\n  formatOnSave?: (item: any, dataSet?: any) => any;\n  formatOnLoad?: (item: any) => any;\n  formatOnCreate?: (item: any, dataSet?: any) => any;\n  formatOnEdit?: (item: any, dataSet?: any) => any;\n\n  /**\n   * Arrays can have these properties\n   */\n  arrayType?: SchemaType;\n  properties?: any;\n  required?: string[];\n  arrayPointers?: Pointers[];\n}\n\nexport interface Pointers {\n  [key: string]: Pointer;\n}\n\n// @dynamic\nexport class Parser {\n  constructor(\n    public schema: any,\n    public injector: Injector,\n    public state: State,\n    public role: string,\n    public definitions: Definitions = {},\n    public customFields: CustomFields = {}\n  ) {}\n\n  form: FormGroup;\n  pointers: Pointers = {};\n\n  static standardizeKey(key: string) {\n    if (key[0] === '/') {\n      key = key.slice(1, key.length);\n    }\n\n    return key;\n  }\n\n  static stringControl(\n    definition: StringPropertyDefinition,\n    required: boolean\n  ) {\n    const controlValidation: any[] = [];\n    const validation: any = {};\n\n    if (required) {\n      controlValidation.push(Validators.required);\n      validation.required = true;\n    }\n\n    if (definition.maxLength) {\n      controlValidation.push(Validators.maxLength(definition.maxLength));\n      validation.maxLength = definition.maxLength;\n    }\n\n    if (definition.minLength) {\n      controlValidation.push(Validators.minLength(definition.minLength));\n      validation.minLength = definition.minLength;\n    }\n\n    if (definition.pattern) {\n      controlValidation.push(Validators.pattern(definition.pattern));\n      validation.patter = definition.pattern;\n    }\n\n    return {\n      control: new FormControl(definition.default || '', controlValidation),\n      validation\n    };\n  }\n\n  static numberControl(\n    definition: NumberPropertyDefinition,\n    required: boolean\n  ) {\n    const validation: any = {};\n    const controlValidation: any[] = [];\n\n    if (required) {\n      controlValidation.push(Validators.required);\n      validation.required = true;\n    }\n\n    if (definition.minimum) {\n      const minimum =\n        definition.minimum + (definition.exclusiveMinimum ? 1 : 0);\n      controlValidation.push(Validators.min(minimum));\n      validation.minimum = minimum;\n    }\n\n    if (definition.maximum) {\n      const maximum =\n        definition.maximum - (definition.exclusiveMaximum ? 1 : 0);\n      controlValidation.push(Validators.max(maximum));\n      validation.maximum = maximum;\n    }\n\n    if (definition.multipleOf) {\n      controlValidation.push(\n        SchemaValidators.multipleOf(definition.multipleOf)\n      );\n      validation.multipleOf = definition.multipleOf;\n    }\n\n    return {\n      control: new FormControl(definition.default || null, controlValidation),\n      validation\n    };\n  }\n\n  static booleanControl(\n    definition: BooleanPropertyDefinition,\n    required: boolean\n  ) {\n    const controlValidation: any[] = [];\n    const validation: any = {};\n\n    if (required) {\n      controlValidation.push(Validators.required);\n      validation.required = true;\n    }\n\n    return {\n      control: new FormControl(definition.default || false, controlValidation),\n      validation\n    };\n  }\n\n  buildForm(\n    value?: any,\n    required: string[] = [],\n    base = '/',\n    addId = true\n  ) {\n    const properties = this.buildProperties(\n      this.schema.properties || {},\n      required,\n      base,\n      addId\n    );\n\n    this.form = properties.form;\n    this.pointers = properties.pointers;\n\n    if (value) {\n      this.form.patchValue(value);\n    }\n\n    return this.form;\n  }\n\n  buildProperties(\n    properties: object,\n    required: string[] = [],\n    base = '/',\n    addId = true\n  ) {\n    const {form, pointers} = [\n      ...Object.entries(properties),\n      /**\n       * Add the id field as a property so that\n       * it can be added to the form if needed\n       */\n      ...(addId\n        ? [\n            [\n              'id',\n              {\n                type: 'string'\n              }\n            ]\n          ]\n        : [])\n    ].reduce(\n      (group, [key, value]: [string, any]) => {\n        const isRequired = required.includes(key);\n\n        let parsed: {\n          control: any;\n          validation: any;\n          arrayType?: SchemaType;\n          properties?: any;\n          required?: string[];\n        };\n\n        switch (value.type) {\n          case SchemaType.String:\n            parsed = Parser.stringControl(value, isRequired);\n            break;\n\n          case SchemaType.Number:\n          case SchemaType.Integer:\n            parsed = Parser.numberControl(value, isRequired);\n            break;\n\n          case SchemaType.Boolean:\n            parsed = Parser.booleanControl(value, isRequired);\n            break;\n\n          case SchemaType.Object:\n            const objectProperties = this.buildProperties(\n              /**\n               * Supporting both {type: 'object', properties: {}} and\n               * {type: 'object', items: {properties: {}}}\n               */\n              value.properties || (value.items && value.items.properties ? value.items.properties : {}),\n              value.required || value.items && value.items.required ? value.items.required : [],\n              base + key + '/',\n              false\n            );\n\n            for (const added in objectProperties.pointers) {\n              if (objectProperties.pointers.hasOwnProperty(added)) {\n                // @ts-ignore\n                group.pointers[added] = objectProperties.pointers[added];\n              }\n            }\n\n            parsed = {\n              control: objectProperties.form,\n              validation: {}\n            };\n            break;\n\n          case SchemaType.Array:\n            parsed = this.buildArray(base, value);\n            break;\n        }\n\n        const pointerKey = base + key;\n        const definition = this.getFromDefinitions(pointerKey) || {};\n\n        // @ts-ignore\n        group.form[key] = parsed.control;\n        // @ts-ignore\n        group.pointers[pointerKey] = {\n          key,\n          type: value.type,\n          ...definition.formatOnLoad\n            && {formatOnLoad: safeEval(definition.formatOnLoad)},\n          ...definition.formatOnSave\n            && {formatOnSave: safeEval(definition.formatOnSave)},\n          ...definition.formatOnCreate\n            && {formatOnCreate: safeEval(definition.formatOnCreate)},\n          ...definition.formatOnEdit\n            && {formatOnEdit: safeEval(definition.formatOnEdit)},\n          // @ts-ignore\n          ...parsed\n        };\n\n        return group;\n      },\n      {\n        form: {},\n        pointers: {}\n      }\n    );\n\n    return {\n      pointers,\n      form: new FormGroup(form)\n    };\n  }\n\n  /**\n   * @param pointerKey Lookup key for the pointer\n   * @param pointer Entire pointer object that should be used\n   * @param definitions Entire definitions object that should be used\n   * @param single Defines if the field shown in the form or in the table\n   * @param arrayRoot If the field is in an array what root lookup to use\n   */\n  field(\n    pointerKey: string,\n    pointer: Pointer,\n    definitions: Definitions = {},\n    single = true,\n    arrayRoot?: string\n  ): CompiledField {\n\n    if (!pointer) {\n      console.log('Pointers: ', this.pointers);\n      throw new Error(`Couldn't find pointer for ${pointerKey}.`);\n    }\n\n    const {key, type, control, validation} = pointer;\n    const definition = {\n      label: key,\n      ...this.getFromDefinitions(pointerKey, definitions)\n    };\n\n    if (\n      (\n        definition.disableOn &&\n        (\n          Array.isArray(definition.disableOn) ?\n            definition.disableOn.includes(this.state)\n            : definition.disableOn === this.state\n        )\n      ) ||\n      (\n        definition.disableForRoles &&\n        (\n          Array.isArray(definition.disableForRoles) ?\n            definition.disableForRoles.includes(this.role)\n            : definition.disableForRoles === this.role\n        )\n      )\n    ) {\n      control.disable();\n    }\n\n    /**\n     * We don't show labels in the table\n     */\n    if (!single) {\n      definition.label = '';\n    }\n\n    if (!definition.component) {\n      definition.component = schemaToComponent(type);\n    }\n\n    // @ts-ignore\n    const component = COMPONENT_TYPE_COMPONENT_MAP[definition.component.type] || this.customFields[definition.component.type];\n\n    if (!component) {\n      // @ts-ignore\n      throw new Error(`Couldn't find a component defined for type: ${definition.component.type}`);\n    }\n\n    const portal = new ComponentPortal<FieldComponent<any>>(\n      component,\n      null,\n      createComponentInjector(this.injector, {\n        control,\n        validation,\n        single,\n        pointers: this.pointers,\n        form: this.form,\n        ...definition,\n        // @ts-ignore\n        ...(definition.component.configuration || {})\n      })\n    );\n\n    return {\n      pointer: pointerKey,\n      control,\n      portal,\n      validation,\n      placeholder: definition.placeholder || '',\n      label: definition.label,\n      onlyOn: definition.onlyOn\n    };\n  }\n\n  addArrayItem(\n    pointer: string,\n    loadHooks = false,\n    parentArray?: {\n      index: number,\n      pointer: string\n    }\n  ) {\n    const pointers = parentArray ? (this.pointers[parentArray.pointer] as any).arrayPointers[parentArray.index] : this.pointers;\n    const target = pointers[pointer];\n    const control = pointers[pointer].control as FormArray;\n\n    if (\n      target.arrayType === SchemaType.Array ||\n      target.arrayType === SchemaType.Object\n    ) {\n      const properties = this.buildProperties(\n        target.properties,\n        target.required,\n        pointer + '/',\n        false\n      );\n\n      if (loadHooks) {\n        this.loadHooks(properties.pointers);\n      }\n      // @ts-ignore\n      target.arrayPointers.unshift(properties.pointers);\n      control.controls.unshift(properties.form);\n\n      return properties.pointers;\n    } else {\n      const cont = new FormControl('');\n      control.controls.unshift(cont);\n      return cont;\n    }\n  }\n\n  moveArrayItem(\n    pointer: string,\n    fromIndex: number,\n    toIndex: number,\n    parentArray?: {\n      index: number,\n      pointer: string\n    }\n  ) {\n    const pointers = parentArray ? (this.pointers[parentArray.pointer] as any).arrayPointers[parentArray.index] : this.pointers;\n    const target = pointers[pointer];\n    const control = pointers[pointer].control as FormArray;\n\n    if (\n      target.arrayType === SchemaType.Array ||\n      target.arrayType === SchemaType.Object\n    ) {\n      moveItemInArray(\n        target.arrayPointers as any[],\n        fromIndex,\n        toIndex\n      );\n    }\n\n    moveItemInArray(\n      control.controls,\n      fromIndex,\n      toIndex\n    );\n  }\n\n  removeArrayItem(\n    pointer: string,\n    index: number,\n    parentArray?: {\n      index: number,\n      pointer: string\n    }\n  ) {\n    const pointers = parentArray ? (this.pointers[parentArray.pointer] as any).arrayPointers[parentArray.index] : this.pointers;\n    pointers[pointer].arrayPointers.splice(index, 1);\n    (pointers[pointer].control as FormArray).removeAt(index);\n  }\n\n  loadHooks(pointers = this.pointers) {\n    Object.values(pointers).forEach(entry => {\n      /**\n       * TODO:\n       * For the moment formatOn methods are\n       * only supported on FormControls.\n       * We might want to expand on this later on.\n       */\n      if (entry.control instanceof FormControl && entry.formatOnLoad) {\n        const adjustedValue = entry.formatOnLoad(entry.control.value);\n\n        if (adjustedValue !== entry.control.value) {\n          entry.control.setValue(adjustedValue);\n        }\n      }\n    });\n  }\n\n  preSaveHooks(\n    currentState: State,\n    statesToProcess = [State.Create, State.Edit],\n    pointers = this.pointers\n  ) {\n\n    const preSaveData = this.form.getRawValue();\n\n    Object.values(pointers).forEach(entry => {\n      /**\n       * TODO:\n       * For the moment formatOn methods are\n       * only supported on FormControls.\n       * We might want to expand on this later on.\n       */\n      if (entry.control instanceof FormControl) {\n        let value = entry.control.value;\n\n        if (entry.formatOnSave) {\n          value = entry.formatOnSave(value, preSaveData);\n        }\n\n        if (statesToProcess.includes(currentState)) {\n          if (currentState === State.Edit && entry.formatOnEdit) {\n            value = entry.formatOnEdit(value, preSaveData);\n          } else if (entry.formatOnCreate) {\n            value = entry.formatOnCreate(value, preSaveData);\n          }\n        }\n\n        if (value !== entry.control.value) {\n          entry.control.setValue(value);\n        }\n      }\n\n      if (entry.arrayPointers) {\n        entry.arrayPointers.forEach(arrayPointers =>\n          this.preSaveHooks(currentState, statesToProcess, arrayPointers)\n        );\n      }\n    });\n  }\n\n  getFromDefinitions(\n    key: string,\n    definitions: Definitions = this.definitions\n  ) {\n    return definitions[Parser.standardizeKey(key)];\n  }\n\n  /**\n   * TODO:\n   * - Handle contains case\n   * - Handle items or contains as array not object\n   */\n  private buildArray(base: string, definition: ArrayPropertyDefinition) {\n    if (!definition.items) {\n      return {\n        control: new FormControl([]),\n        ...(definition.items\n          ? {\n              arrayType: definition.items.type,\n              properties: definition.items.properties,\n              required: definition.items.required,\n              validation: {}\n            }\n          : {\n              arrayType: SchemaType.String,\n              validation: {}\n            })\n      };\n    } else {\n      return {\n        arrayType: definition.items.type,\n        properties: definition.items.properties,\n        required: definition.items.required,\n        validation: {},\n        control: new FormArray([]),\n        arrayPointers: []\n      };\n    }\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Inject,\n  Injector,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Optional,\n  Output,\n  SimpleChanges\n} from '@angular/core';\nimport {FormGroup} from '@angular/forms';\nimport {forkJoin, of, Subscription} from 'rxjs';\nimport {SegmentType} from './enums/segment-type.enum';\nimport {State} from './enums/state.enum';\nimport {FormBuilderService} from './form-builder.service';\nimport {CompiledSegment} from './interfaces/compiled-segment.interface';\nimport {FormBuilderData} from './interfaces/form-builder-data.interface';\nimport {CUSTOM_FIELDS, CustomFields} from './utils/custom-fields';\nimport {filterAndCompileSegments} from './utils/filter-and-compile-segments';\nimport {Parser} from './utils/parser';\nimport {ROLE} from './utils/role';\n\n@Component({\n  selector: 'fb-form-builder',\n  templateUrl: './form-builder.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [FormBuilderService]\n})\nexport class FormBuilderComponent implements OnChanges, OnDestroy {\n  constructor(\n    private injector: Injector,\n    @Optional()\n    @Inject(ROLE)\n    private role: string,\n    @Optional()\n    @Inject(CUSTOM_FIELDS)\n    private customFields: CustomFields,\n    private cdr: ChangeDetectorRef,\n    private service: FormBuilderService\n  ) { }\n\n  @Input()\n  data: FormBuilderData;\n\n  @Input()\n  value: any;\n\n  @Input()\n  id: string;\n\n  @Output()\n  valueChanges = new EventEmitter<any>();\n\n  @Output()\n  validityChanges = new EventEmitter<boolean>();\n\n  form: FormGroup;\n  parser: Parser;\n  segments: CompiledSegment[];\n\n  @Input()\n  state: State = State.Create;\n\n  private changeSubscription: Subscription;\n  private statusSubscription: Subscription;\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.data) {\n      this.render();\n    }\n\n    if (changes.value && this.form) {\n      this.form.patchValue(changes.value.currentValue);\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.changeSubscription) {\n      this.changeSubscription.unsubscribe();\n    }\n\n    if (this.statusSubscription) {\n      this.statusSubscription.unsubscribe();\n    }\n  }\n\n  process() {\n    this.parser.preSaveHooks(\n      this.state\n    );\n\n    return this.form.getRawValue();\n  }\n\n  save(\n    collectionId: string,\n    documentId: string\n  ) {\n\n    const toExec = this.service.saveComponents.map(comp =>\n      comp.save(collectionId, documentId)\n    );\n\n    return toExec.length ? forkJoin(toExec) : of({});\n  }\n\n  saveAndProcess(\n    collectionId: string,\n    documentId: string\n  ) {\n    this.process();\n\n    return this.save(\n      collectionId,\n      documentId\n    );\n  }\n\n  private render() {\n    const value = this.data.value || {};\n    const definitions = this.data.definitions || {};\n\n    this.parser = new Parser(\n      this.data.schema,\n      this.injector,\n      this.state,\n      this.role,\n      definitions,\n      this.customFields\n    );\n\n    this.form = this.parser.buildForm(\n      value,\n      [],\n      '/',\n      false\n    );\n\n    this.parser.loadHooks();\n\n    this.segments = filterAndCompileSegments(\n      this.data.segments ||\n      [{\n        title: '',\n        fields: Object.keys(this.parser.pointers),\n        columnsDesktop: 12,\n        type: SegmentType.Empty\n      }],\n      this.parser,\n      definitions,\n      this.injector,\n      value\n    );\n\n    if (this.changeSubscription) {\n      this.changeSubscription.unsubscribe();\n    }\n\n    if (this.statusSubscription) {\n      this.statusSubscription.unsubscribe();\n    }\n\n    this.changeSubscription = this.form.valueChanges\n      .subscribe(val => {\n        this.valueChanges.emit(val);\n      });\n\n    this.statusSubscription = this.form.statusChanges\n      .subscribe(val => {\n        this.validityChanges.emit(val === 'VALID');\n      });\n\n    this.cdr.markForCheck();\n  }\n}\n","import {Directive, ElementRef, EventEmitter, HostListener, Input, Output, Renderer2} from '@angular/core';\n\n@Directive({\n  selector: '[fbDropzone]'\n})\nexport class DropzoneDirective {\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2\n  ) {}\n\n  @Input() hoverClass = 'active';\n  @Output() dropped = new EventEmitter<FileList>();\n  @Output() hovered = new EventEmitter<boolean>();\n\n  @HostListener('drop', ['$event'])\n  onDrop($event: any) {\n    $event.preventDefault();\n    this.dropped.emit($event.dataTransfer.files);\n    this.renderer.removeClass(this.el.nativeElement, this.hoverClass);\n    this.hovered.emit(false);\n  }\n\n  @HostListener('dragover', ['$event'])\n  onDragOver($event: Event) {\n    $event.preventDefault();\n    this.renderer.addClass(this.el.nativeElement, this.hoverClass);\n    this.hovered.emit(true);\n  }\n\n  @HostListener('dragleave', ['$event'])\n  onDragLeave($event: Event) {\n    $event.preventDefault();\n    this.renderer.removeClass(this.el.nativeElement, this.hoverClass);\n    this.hovered.emit(false);\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {CompiledField} from '../../interfaces/compiled-field.interface';\nimport {Parser} from '../../utils/parser';\n\n@Pipe({\n  name: 'showField'\n})\nexport class ShowFieldPipe implements PipeTransform {\n  transform(fields: CompiledField[], parser: Parser): CompiledField[] {\n    return fields.filter(\n      field =>\n        !field.onlyOn ||\n        (\n          Array.isArray(field.onlyOn) ?\n            field.onlyOn.includes(parser.state) :\n            field.onlyOn === parser.state\n        )\n    );\n  }\n}\n","import {DragDropModule} from '@angular/cdk/drag-drop';\nimport {PortalModule} from '@angular/cdk/portal';\nimport {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {ReactiveFormsModule} from '@angular/forms';\nimport {MatAutocompleteModule} from '@angular/material/autocomplete';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatCardModule} from '@angular/material/card';\nimport {MatCheckboxModule} from '@angular/material/checkbox';\nimport {MatChipsModule} from '@angular/material/chips';\nimport {MatNativeDateModule} from '@angular/material/core';\nimport {MatDatepickerModule} from '@angular/material/datepicker';\nimport {MatDialogModule} from '@angular/material/dialog';\nimport {MatDividerModule} from '@angular/material/divider';\nimport {MatExpansionModule} from '@angular/material/expansion';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport {MatIconModule} from '@angular/material/icon';\nimport {MatInputModule} from '@angular/material/input';\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\nimport {MatRadioModule} from '@angular/material/radio';\nimport {MatSelectModule} from '@angular/material/select';\nimport {MatSlideToggleModule} from '@angular/material/slide-toggle';\nimport {MatSliderModule} from '@angular/material/slider';\nimport {MatTabsModule} from '@angular/material/tabs';\nimport {MatTooltipModule} from '@angular/material/tooltip';\nimport {SanitizeModule} from '@jaspero/ng-helpers';\nimport {TranslocoModule} from '@ngneat/transloco';\nimport {DropzoneDirective} from './directives/dropzone/dropzone.directive';\nimport {FieldComponent} from './field/field.component';\nimport {AutocompleteComponent} from './fields/autocomplete/autocomplete.component';\nimport {CheckboxComponent} from './fields/checkbox/checkbox.component';\nimport {ChipsComponent} from './fields/chips/chips.component';\nimport {DateFieldComponent} from './fields/date-field/date-field.component';\nimport {DraggableListComponent} from './fields/draggable-list/draggable-list.component';\nimport {FileComponent} from './fields/file/file.component';\nimport {GalleryComponent} from './fields/gallery/gallery.component';\nimport {ImageComponent} from './fields/image/image.component';\nimport {InputComponent} from './fields/input/input.component';\nimport {RadioComponent} from './fields/radio/radio.component';\nimport {RangeComponent} from './fields/range/range.component';\nimport {SelectComponent} from './fields/select/select.component';\nimport {SliderComponent} from './fields/slider/slider.component';\nimport {TextareaComponent} from './fields/textarea/textarea.component';\nimport {ToggleComponent} from './fields/toggle/toggle.component';\nimport {WysiwygComponent} from './fields/wysiwyg/wysiwyg.component';\nimport {FormBuilderComponent} from './form-builder.component';\nimport {ShowFieldPipe} from './pipes/show-field/show-field.pipe';\nimport {SegmentComponent} from './segment/segment.component';\nimport {AccordionComponent} from './segments/accordion/accordion.component';\nimport {CardComponent} from './segments/card/card.component';\nimport {EmptyComponent} from './segments/empty/empty.component';\nimport {StepperComponent} from './segments/stepper/stepper.component';\nimport {TabsComponent} from './segments/tabs/tabs.component';\n\n@NgModule({\n  declarations: [\n\n    /**\n     * Fields\n     */\n    FieldComponent,\n\n    AutocompleteComponent,\n    CheckboxComponent,\n    ChipsComponent,\n    DateFieldComponent,\n    RangeComponent,\n    DraggableListComponent,\n    FileComponent,\n    GalleryComponent,\n    ImageComponent,\n    InputComponent,\n    RadioComponent,\n    SelectComponent,\n    SliderComponent,\n    TextareaComponent,\n    ToggleComponent,\n    WysiwygComponent,\n\n    /**\n     * Segments\n     */\n    SegmentComponent,\n\n    AccordionComponent,\n    CardComponent,\n    EmptyComponent,\n    StepperComponent,\n    TabsComponent,\n\n    /**\n     * Directives\n     */\n    DropzoneDirective,\n\n    /**\n     * Pipes\n     */\n    ShowFieldPipe,\n\n    FormBuilderComponent\n  ],\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n\n    /**\n     * Material\n     */\n    MatFormFieldModule,\n    MatInputModule,\n    MatButtonModule,\n    MatAutocompleteModule,\n    MatSelectModule,\n    MatSliderModule,\n    MatSlideToggleModule,\n    MatCheckboxModule,\n    MatChipsModule,\n    MatIconModule,\n    MatDatepickerModule,\n    MatNativeDateModule,\n    DragDropModule,\n    MatDialogModule,\n    MatTooltipModule,\n    MatProgressSpinnerModule,\n    MatExpansionModule,\n    MatDividerModule,\n    PortalModule,\n    MatCardModule,\n    MatTabsModule,\n    MatRadioModule,\n\n    /**\n     * Jp Helpers\n     */\n    SanitizeModule,\n\n    /**\n     * Other\n     */\n    TranslocoModule\n  ],\n  exports: [FormBuilderComponent]\n})\nexport class FormBuilderModule {\n}\n","/**\n * Public API Surface of form-builder\n */\nexport * from './lib/form-builder.component';\nexport * from './lib/form-builder.module';\nexport * from './lib/form-builder.service';\nexport * from './lib/field/field.component';\n\nexport * from './lib/services/db.service';\nexport * from './lib/services/storage.service';\n\nexport * from './lib/utils/parser';\nexport * from './lib/utils/parse-template';\nexport * from './lib/utils/safe-eval';\nexport * from './lib/utils/format-generated-images';\nexport * from './lib/utils/format-file-name';\nexport * from './lib/utils/clone-abstract-control';\nexport * from './lib/utils/switch-item-locations';\n\n/**\n * Interfaces\n */\nexport * from './lib/interfaces/definitions.interface';\nexport * from './lib/interfaces/definitions.interface';\nexport * from './lib/interfaces/option.interface';\nexport * from './lib/interfaces/segment.interface';\nexport * from './lib/interfaces/field-data.interface';\nexport * from './lib/interfaces/form-builder-data.interface';\n\n/**\n * Enums\n */\nexport * from './lib/enums/component-type.enum';\nexport * from './lib/enums/schema-type.enum';\nexport * from './lib/enums/segment-type.enum';\nexport * from './lib/enums/state.enum';\n\n/**\n * Injectors\n */\nexport * from './lib/utils/role';\nexport * from './lib/utils/additional-context';\nexport * from './lib/utils/storage-url';\nexport * from './lib/utils/custom-fields';\nexport {COMPONENT_DATA} from './lib/utils/create-component-injector';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {DropzoneDirective as x} from './lib/directives/dropzone/dropzone.directive';\nexport {AutocompleteComponent as a} from './lib/fields/autocomplete/autocomplete.component';\nexport {CheckboxComponent as b} from './lib/fields/checkbox/checkbox.component';\nexport {ChipsComponent as c} from './lib/fields/chips/chips.component';\nexport {DateFieldComponent as d} from './lib/fields/date-field/date-field.component';\nexport {DraggableListComponent as f} from './lib/fields/draggable-list/draggable-list.component';\nexport {FileComponent as g} from './lib/fields/file/file.component';\nexport {GalleryComponent as h} from './lib/fields/gallery/gallery.component';\nexport {ImageComponent as i} from './lib/fields/image/image.component';\nexport {InputComponent as j} from './lib/fields/input/input.component';\nexport {RadioComponent as k} from './lib/fields/radio/radio.component';\nexport {RangeComponent as e} from './lib/fields/range/range.component';\nexport {SelectComponent as l} from './lib/fields/select/select.component';\nexport {SliderComponent as m} from './lib/fields/slider/slider.component';\nexport {TextareaComponent as n} from './lib/fields/textarea/textarea.component';\nexport {ToggleComponent as o} from './lib/fields/toggle/toggle.component';\nexport {WysiwygComponent as p} from './lib/fields/wysiwyg/wysiwyg.component';\nexport {ShowFieldPipe as y} from './lib/pipes/show-field/show-field.pipe';\nexport {SegmentComponent as q} from './lib/segment/segment.component';\nexport {AccordionComponent as s} from './lib/segments/accordion/accordion.component';\nexport {CardComponent as t} from './lib/segments/card/card.component';\nexport {EmptyComponent as u} from './lib/segments/empty/empty.component';\nexport {StepperComponent as v} from './lib/segments/stepper/stepper.component';\nexport {TabsComponent as w} from './lib/segments/tabs/tabs.component';\nexport {SEGMENT_DATA as r} from './lib/utils/create-segment-injector';"],"names":[],"mappings":"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"}