import { ChangeDetectionStrategy, Component } from '@angular/core';
import { SegmentComponent } from '../../segment/segment.component';
import { filterAndCompileSegments } from '../../utils/filter-and-compile-segments';
import { safeEval } from '../../utils/safe-eval';
export class TabsComponent extends SegmentComponent {
    get configuration() {
        return this.segment.configuration;
    }
    ngOnInit() {
        super.ngOnInit();
        if (this.configuration.selectedTabChange) {
            this.selectedTabChange = safeEval(this.configuration.selectedTabChange);
        }
        this.tabs = this.configuration.tabs.map(tab => (Object.assign(Object.assign({}, tab), { fields: (tab.fields || []).map(key => this.sData.parser.field(key, this.pointers[key], this.sData.definitions)), nestedSegments: filterAndCompileSegments(tab.nestedSegments || [], this.sData.parser, this.sData.definitions, this.injector, this.segment.entryValue) })));
    }
    tabChange(event) {
        if (this.selectedTabChange) {
            this.selectedTabChange(event, this.sData);
        }
    }
}
TabsComponent.decorators = [
    { type: Component, args: [{
                selector: 'fb-tabs',
                template: "<ng-container *ngIf=\"segment.title || segment.subTitle\">\n  <h4 *ngIf=\"segment.title\">{{segment.title}}</h4>\n  <h5 *ngIf=\"segment.subTitle\">{{segment.subTitle}}</h5>\n  <div class=\"p-y-m\">\n    <mat-divider></mat-divider>\n  </div>\n</ng-container>\n\n<p *ngIf=\"segment.description\">{{segment.description}}</p>\n\n<mat-tab-group\n  [selectedIndex]=\"configuration.selectedIndex\"\n  [dynamicHeight]=\"configuration.dynamicHeight\"\n  [disableRipple]=\"configuration.disableRipple\"\n  [attr.mat-align-tabs]=\"configuration.alignment\"\n  (selectedTabChange)=\"tabChange($event)\">\n\n  <mat-tab\n    *ngFor=\"let tab of tabs\"\n    [label]=\"tab.title\"\n    [disabled]=\"tab.disabled\">\n\n    <div class=\"p-a-s\">\n      <ng-container *ngFor=\"let field of tab.fields | showField:sData.parser\">\n        <ng-template [cdkPortalOutlet]=\"field.portal\"></ng-template>\n      </ng-container>\n    </div>\n\n    <ng-container *ngFor=\"let nested of tab.nestedSegments\">\n      <ng-template [cdkPortalOutlet]=\"nested.component\"></ng-template>\n    </ng-container>\n  </mat-tab>\n</mat-tab-group>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [""]
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9mb3JtLWJ1aWxkZXIvc3JjL2xpYi9zZWdtZW50cy90YWJzL3RhYnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyx1QkFBdUIsRUFBRSxTQUFTLEVBQVMsTUFBTSxlQUFlLENBQUM7QUFLekUsT0FBTyxFQUFDLGdCQUFnQixFQUFjLE1BQU0saUNBQWlDLENBQUM7QUFDOUUsT0FBTyxFQUFDLHdCQUF3QixFQUFDLE1BQU0seUNBQXlDLENBQUM7QUFDakYsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBa0MvQyxNQUFNLE9BQU8sYUFBYyxTQUFRLGdCQUFtQztJQUtwRSxJQUFJLGFBQWE7UUFDZixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBa0MsQ0FBQztJQUN6RCxDQUFDO0lBRUQsUUFBUTtRQUNOLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUVqQixJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsaUJBQWlCLEVBQUU7WUFDeEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLFFBQVEsQ0FDL0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxpQkFBMkIsQ0FDL0MsQ0FBQztTQUNIO1FBRUQsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQ3JDLEdBQUcsQ0FBQyxFQUFFLENBQUMsaUNBQ0YsR0FBRyxLQUNOLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FDckIsR0FBRyxFQUNILElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQ2xCLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUN2QixDQUNGLEVBQ0QsY0FBYyxFQUFFLHdCQUF3QixDQUN0QyxHQUFHLENBQUMsY0FBYyxJQUFJLEVBQUUsRUFDeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQ2pCLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUN0QixJQUFJLENBQUMsUUFBUSxFQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUN4QixJQUNELENBQ0gsQ0FBQztJQUNKLENBQUM7SUFFRCxTQUFTLENBQUMsS0FBd0I7UUFDaEMsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUNwQixLQUFLLEVBQ0wsSUFBSSxDQUFDLEtBQUssQ0FDWCxDQUFDO1NBQ0g7SUFDSCxDQUFDOzs7WUFwREYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxTQUFTO2dCQUNuQixtbUNBQW9DO2dCQUVwQyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTs7YUFDaEQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQsIE9uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge01hdFRhYkNoYW5nZUV2ZW50fSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC90YWJzJztcbmltcG9ydCB7Q29tcGlsZWRGaWVsZH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9jb21waWxlZC1maWVsZC5pbnRlcmZhY2UnO1xuaW1wb3J0IHtDb21waWxlZFNlZ21lbnR9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvY29tcGlsZWQtc2VnbWVudC5pbnRlcmZhY2UnO1xuaW1wb3J0IHtTZWdtZW50fSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3NlZ21lbnQuaW50ZXJmYWNlJztcbmltcG9ydCB7U2VnbWVudENvbXBvbmVudCwgU2VnbWVudERhdGF9IGZyb20gJy4uLy4uL3NlZ21lbnQvc2VnbWVudC5jb21wb25lbnQnO1xuaW1wb3J0IHtmaWx0ZXJBbmRDb21waWxlU2VnbWVudHN9IGZyb20gJy4uLy4uL3V0aWxzL2ZpbHRlci1hbmQtY29tcGlsZS1zZWdtZW50cyc7XG5pbXBvcnQge3NhZmVFdmFsfSBmcm9tICcuLi8uLi91dGlscy9zYWZlLWV2YWwnO1xuXG50eXBlIFNlbGVjdGVkVGFiQ2hhbmdlID0gKGV2ZW50OiBNYXRUYWJDaGFuZ2VFdmVudCwgc0RhdGE6IFNlZ21lbnREYXRhKSA9PiB2b2lkO1xuXG5pbnRlcmZhY2UgVGFic0NvbmZpZ3VyYXRpb24ge1xuICBzZWxlY3RlZEluZGV4PzogbnVtYmVyO1xuICBkeW5hbWljSGVpZ2h0PzogYm9vbGVhbjtcbiAgZGlzYWJsZVJpcHBsZT86IGJvb2xlYW47XG4gIHNlbGVjdGVkVGFiQ2hhbmdlPzogc3RyaW5nIHwgU2VsZWN0ZWRUYWJDaGFuZ2U7XG4gIGFsaWdubWVudD86ICdzdGFydCcgfCAnY2VudGVyJyB8ICdlbmQnO1xuICB0YWJzOiBTZWdtZW50VGFiW107XG59XG5cbmludGVyZmFjZSBTZWdtZW50VGFiU2hhcmVkIHtcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFNlZ21lbnRUYWIgZXh0ZW5kcyBTZWdtZW50VGFiU2hhcmVkIHtcbiAgZmllbGRzPzogc3RyaW5nW107XG4gIG5lc3RlZFNlZ21lbnRzPzogU2VnbWVudFtdO1xufVxuXG5pbnRlcmZhY2UgQ29tcGlsZWRTZWdtZW50VGFiIGV4dGVuZHMgU2VnbWVudFRhYlNoYXJlZCB7XG4gIGZpZWxkcz86IENvbXBpbGVkRmllbGRbXTtcbiAgbmVzdGVkU2VnbWVudHM/OiBDb21waWxlZFNlZ21lbnRbXTtcbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZmItdGFicycsXG4gIHRlbXBsYXRlVXJsOiAnLi90YWJzLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vdGFicy5jb21wb25lbnQuc2NzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBUYWJzQ29tcG9uZW50IGV4dGVuZHMgU2VnbWVudENvbXBvbmVudDxUYWJzQ29uZmlndXJhdGlvbj4gaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIHRhYnM6IENvbXBpbGVkU2VnbWVudFRhYltdO1xuICBzZWxlY3RlZFRhYkNoYW5nZT86IFNlbGVjdGVkVGFiQ2hhbmdlO1xuXG4gIGdldCBjb25maWd1cmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnNlZ21lbnQuY29uZmlndXJhdGlvbiBhcyBUYWJzQ29uZmlndXJhdGlvbjtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHN1cGVyLm5nT25Jbml0KCk7XG5cbiAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdGVkVGFiQ2hhbmdlKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkVGFiQ2hhbmdlID0gc2FmZUV2YWwoXG4gICAgICAgIHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RlZFRhYkNoYW5nZSBhcyBzdHJpbmdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy50YWJzID0gdGhpcy5jb25maWd1cmF0aW9uLnRhYnMubWFwKFxuICAgICAgdGFiID0+ICh7XG4gICAgICAgIC4uLnRhYixcbiAgICAgICAgZmllbGRzOiAodGFiLmZpZWxkcyB8fCBbXSkubWFwKGtleSA9PlxuICAgICAgICAgIHRoaXMuc0RhdGEucGFyc2VyLmZpZWxkKFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdGhpcy5wb2ludGVyc1trZXldLFxuICAgICAgICAgICAgdGhpcy5zRGF0YS5kZWZpbml0aW9uc1xuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgbmVzdGVkU2VnbWVudHM6IGZpbHRlckFuZENvbXBpbGVTZWdtZW50cyhcbiAgICAgICAgICB0YWIubmVzdGVkU2VnbWVudHMgfHwgW10sXG4gICAgICAgICAgdGhpcy5zRGF0YS5wYXJzZXIsXG4gICAgICAgICAgdGhpcy5zRGF0YS5kZWZpbml0aW9ucyxcbiAgICAgICAgICB0aGlzLmluamVjdG9yLFxuICAgICAgICAgIHRoaXMuc2VnbWVudC5lbnRyeVZhbHVlXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHRhYkNoYW5nZShldmVudDogTWF0VGFiQ2hhbmdlRXZlbnQpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFRhYkNoYW5nZSkge1xuICAgICAgdGhpcy5zZWxlY3RlZFRhYkNoYW5nZShcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIHRoaXMuc0RhdGFcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbiJdfQ==