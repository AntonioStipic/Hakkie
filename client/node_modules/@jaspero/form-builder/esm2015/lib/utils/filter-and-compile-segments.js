import { compileSegment } from './compile-segment';
export function filterAndCompileSegments(segments, parser, definitions, injector, value, parent) {
    return segments.reduce((acc, cur) => {
        if (!cur.authorization || cur.authorization.includes(parser.role)) {
            const compiled = compileSegment(cur, parser, definitions, injector, value, parent);
            if (compiled) {
                acc.push(
                // @ts-ignore
                compiled);
            }
        }
        return acc;
    }, []);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLWFuZC1jb21waWxlLXNlZ21lbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvZm9ybS1idWlsZGVyL3NyYy9saWIvdXRpbHMvZmlsdGVyLWFuZC1jb21waWxlLXNlZ21lbnRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUdqRCxNQUFNLFVBQVUsd0JBQXdCLENBQ3RDLFFBQW1CLEVBQ25CLE1BQWMsRUFDZCxXQUF3QixFQUN4QixRQUFrQixFQUNsQixLQUFVLEVBQ1YsTUFBZTtJQUVmLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNsQyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsSUFBSSxHQUFHLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFFakUsTUFBTSxRQUFRLEdBQUcsY0FBYyxDQUM3QixHQUFHLEVBQ0gsTUFBTSxFQUNOLFdBQVcsRUFDWCxRQUFRLEVBQ1IsS0FBSyxFQUNMLE1BQU0sQ0FDUCxDQUFDO1lBRUYsSUFBSSxRQUFRLEVBQUU7Z0JBQ1osR0FBRyxDQUFDLElBQUk7Z0JBQ04sYUFBYTtnQkFDYixRQUFRLENBQ1QsQ0FBQzthQUNIO1NBQ0Y7UUFFRCxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNULENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luamVjdG9yfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7RGVmaW5pdGlvbnN9IGZyb20gJy4uL2ludGVyZmFjZXMvZGVmaW5pdGlvbnMuaW50ZXJmYWNlJztcbmltcG9ydCB7U2VnbWVudH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9zZWdtZW50LmludGVyZmFjZSc7XG5pbXBvcnQge2NvbXBpbGVTZWdtZW50fSBmcm9tICcuL2NvbXBpbGUtc2VnbWVudCc7XG5pbXBvcnQge1BhcnNlcn0gZnJvbSAnLi9wYXJzZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyQW5kQ29tcGlsZVNlZ21lbnRzKFxuICBzZWdtZW50czogU2VnbWVudFtdLFxuICBwYXJzZXI6IFBhcnNlcixcbiAgZGVmaW5pdGlvbnM6IERlZmluaXRpb25zLFxuICBpbmplY3RvcjogSW5qZWN0b3IsXG4gIHZhbHVlOiBhbnksXG4gIHBhcmVudD86IHN0cmluZ1xuKSB7XG4gIHJldHVybiBzZWdtZW50cy5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XG4gICAgaWYgKCFjdXIuYXV0aG9yaXphdGlvbiB8fCBjdXIuYXV0aG9yaXphdGlvbi5pbmNsdWRlcyhwYXJzZXIucm9sZSkpIHtcblxuICAgICAgY29uc3QgY29tcGlsZWQgPSBjb21waWxlU2VnbWVudChcbiAgICAgICAgY3VyLFxuICAgICAgICBwYXJzZXIsXG4gICAgICAgIGRlZmluaXRpb25zLFxuICAgICAgICBpbmplY3RvcixcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHBhcmVudFxuICAgICAgKTtcblxuICAgICAgaWYgKGNvbXBpbGVkKSB7XG4gICAgICAgIGFjYy5wdXNoKFxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjb21waWxlZFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0sIFtdKTtcbn1cbiJdfQ==